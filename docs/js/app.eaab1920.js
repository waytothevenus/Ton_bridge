(function(){var t={26693:function(t,e,n){"use strict";var r=n(49242),s=n(66228),o=n(73396);function i(t,e,n,r,s,i){const a=(0,o.up)("router-view"),l=(0,o.up)("layout");return(0,o.wg)(),(0,o.j4)(l,null,{default:(0,o.w5)((()=>[(0,o.Wm)(a)])),_:1})}const a={class:"LayoutDefault"};function l(t,e,n,r,s,i){const l=(0,o.up)("Alert");return(0,o.wg)(),(0,o.iD)("div",a,[(0,o.WI)(t.$slots,"default",{},void 0,!0),t.alert?((0,o.wg)(),(0,o.j4)(l,{key:0,title:t.alert.title,message:t.alert.message,buttonLabel:t.alert.buttonLabel,onClose:e[0]||(e[0]=e=>t.setAlert(null))},null,8,["title","message","buttonLabel"])):(0,o.kq)("",!0)])}var d=n(7076),c=n(20065),u=n(87139);const p={class:"Alert"},h={class:"Alert-panel"};function m(t,e,n,s,i,a){return(0,o.wg)(),(0,o.j4)(r.uT,{name:"AlertTransition",appear:""},{default:(0,o.w5)((()=>[(0,o._)("aside",p,[(0,o._)("div",{class:"Alert-overlay",onClick:e[0]||(e[0]=(...e)=>t.close&&t.close(...e))}),(0,o._)("div",h,[(0,o._)("h2",null,(0,u.zw)(t.title),1),(0,o._)("p",null,(0,u.zw)(t.message),1),(0,o._)("button",{onClick:e[1]||(e[1]=(...e)=>t.close&&t.close(...e))},(0,u.zw)(t.buttonLabel),1)])])])),_:1})}var y=(0,o.aZ)({props:{title:{type:String,required:!0},message:{type:String,required:!0},buttonLabel:{type:String,required:!0}},created(){document.addEventListener("keydown",this.onKeyDown)},beforeUnmount(){document.removeEventListener("keydown",this.onKeyDown)},methods:{onKeyDown(t){27===t.keyCode&&this.close()},close(){this.$emit("close")}}}),g=n(40089);const w=(0,g.Z)(y,[["render",m],["__scopeId","data-v-01a3d5d7"]]);var b=w,T=(0,o.aZ)({name:"LayoutDefault",components:{Alert:b},methods:{...(0,c.OI)(["setAlert"])},computed:{...(0,c.Se)(["alert"])},mounted(){document.documentElement.classList.add("touch"===d.R8?"isTouch":"isPointer")},watch:{alert:function(t){null!==t&&(this.alert={...t})}}});const f=(0,g.Z)(T,[["render",l],["__scopeId","data-v-7043d382"]]);var v=f,k=(0,o.aZ)({components:{Layout:v}});const C=(0,g.Z)(k,[["render",i]]);var S=C,A=n(5658),I={logoLabel:t=>{const{normalize:e}=t;return e(["Bridge"])},connectWallet:t=>{const{normalize:e}=t;return e(["Connect Wallet"])},testnetMessage:t=>{const{normalize:e}=t;return e(["This is the testnet version. Dont send real coins!"])},providers:{metamask:t=>{const{normalize:e}=t;return e(["Metamask"])},walletConnect:t=>{const{normalize:e}=t;return e(["WalletConnect"])},walletLink:t=>{const{normalize:e}=t;return e(["Coinbase Wallet"])}},networks:{ton:{currency:t=>{const{normalize:e}=t;return e(["Toncoin"])},transactionCompleted:t=>{const{normalize:e}=t;return e(["TON transaction completed successfully"])},transactionSend1:t=>{const{normalize:e}=t;return e(["Please send "])},transactionSend2:t=>{const{normalize:e}=t;return e(["Toncoin to the address"])},transactionSendComment:t=>{const{normalize:e}=t;return e(["with the comment"])},openWallet:t=>{const{normalize:e}=t;return e(["Open Wallet"])},generateQRCode:t=>{const{normalize:e}=t;return e(["Generate QR Code"])},scanQRCode:t=>{const{normalize:e}=t;return e(["or scan QR code below"])},errors:{invalidAddress:t=>{const{normalize:e}=t;return e(["Not valid TON address"])}},main:{name:t=>{const{normalize:e}=t;return e(["The Open Network"])},nameSwitcher:t=>{const{normalize:e}=t;return e(["The Open\nNetwork"])},nameShort:t=>{const{normalize:e}=t;return e(["TON"])},coin:t=>{const{normalize:e}=t;return e(["Toncoin"])},coinShort:t=>{const{normalize:e}=t;return e(["Toncoin"])}},test:{name:t=>{const{normalize:e}=t;return e(["TON Testnet"])},nameSwitcher:t=>{const{normalize:e}=t;return e(["TON\nTestnet"])},nameShort:t=>{const{normalize:e}=t;return e(["TON"])},coin:t=>{const{normalize:e}=t;return e(["Toncoin"])},coinShort:t=>{const{normalize:e}=t;return e(["Toncoin"])}}},eth:{currency:t=>{const{normalize:e}=t;return e(["ETH"])},pageTitle:t=>{const{normalize:e}=t;return e(["TON-ETH Bridge"])},gasFee:t=>{const{normalize:e,interpolate:n,named:r}=t;return e(["Ethereum gas fee ~ ",n(r("fee"))," ETH"])},transactionCompleted:t=>{const{normalize:e}=t;return e(["Ethereum transaction completed successfully"])},transactionWait:t=>{const{normalize:e}=t;return e(["Please wait for the Ethereum transaction to be processed"])},transactionSend:t=>{const{normalize:e,interpolate:n,named:r}=t;return e(["Please send Ethereum transaction in ",n(r("provider"))])},blocksConfirmations:t=>{const{normalize:e,interpolate:n,named:r}=t;return e(["Collected ",n(r("count"))," Ethereum block confirmations"])},errors:{invalidAddress:t=>{const{normalize:e}=t;return e(["Not valid ETH address"])},lowBalance:t=>{const{normalize:e}=t;return e(["You need to have ETH on your wallet to pay for gas in the Ethereum network"])}},main:{name:t=>{const{normalize:e}=t;return e(["Ethereum Network"])},nameSwitcher:t=>{const{normalize:e}=t;return e(["Ethereum\nNetwork"])},nameShort:t=>{const{normalize:e}=t;return e(["ETH"])},coin:t=>{const{normalize:e}=t;return e(["TONCOIN (ERC20)"])},coinShort:t=>{const{normalize:e}=t;return e(["TONCOIN"])}},test:{name:t=>{const{normalize:e}=t;return e(["Ethereum Goerli"])},nameSwitcher:t=>{const{normalize:e}=t;return e(["Ethereum\nGoerli"])},nameShort:t=>{const{normalize:e}=t;return e(["ETH"])},coin:t=>{const{normalize:e}=t;return e(["TONCOIN (ERC20)"])},coinShort:t=>{const{normalize:e}=t;return e(["TONCOIN"])}}},bsc:{currency:t=>{const{normalize:e}=t;return e(["BNB"])},pageTitle:t=>{const{normalize:e}=t;return e(["TON-BSC Bridge"])},gasFee:t=>{const{normalize:e,interpolate:n,named:r}=t;return e(["BSC gas fee ~ ",n(r("fee"))," BNB"])},transactionCompleted:t=>{const{normalize:e}=t;return e(["BSC transaction completed successfully"])},transactionWait:t=>{const{normalize:e}=t;return e(["Please wait for the BSC transaction to be processed"])},transactionSend:t=>{const{normalize:e,interpolate:n,named:r}=t;return e(["Please send BSC transaction in ",n(r("provider"))])},blocksConfirmations:t=>{const{normalize:e,interpolate:n,named:r}=t;return e(["Collected ",n(r("count"))," BSC block confirmations"])},errors:{invalidAddress:t=>{const{normalize:e}=t;return e(["Not valid BSC address"])},lowBalance:t=>{const{normalize:e}=t;return e(["You need to have BNB on your wallet to pay for gas in the BSC network"])}},main:{name:t=>{const{normalize:e}=t;return e(["Binance Smart Chain"])},nameSwitcher:t=>{const{normalize:e}=t;return e(["Binance\nSmart Chain"])},nameShort:t=>{const{normalize:e}=t;return e(["BSC"])},coin:t=>{const{normalize:e}=t;return e(["TONCOIN (BEP-20)"])},coinShort:t=>{const{normalize:e}=t;return e(["TONCOIN"])}},test:{name:t=>{const{normalize:e}=t;return e(["BSC Testnet"])},nameSwitcher:t=>{const{normalize:e}=t;return e(["BSC\nTestnet"])},nameShort:t=>{const{normalize:e}=t;return e(["BSC"])},coin:t=>{const{normalize:e}=t;return e(["TONCOIN (BEP-20)"])},coinShort:t=>{const{normalize:e}=t;return e(["TONCOIN"])}}}},tokenAddress:t=>{const{normalize:e}=t;return e(["Token address"])},sendToken:t=>{const{normalize:e}=t;return e(["Asset"])},amountOfTon:t=>{const{normalize:e,interpolate:n,named:r}=t;return e(["Amount of ",n(r("tokenSymbol"))])},addressInputLabel:t=>{const{normalize:e}=t;return e(["Destination address"])},willReceive:t=>{const{normalize:e,interpolate:n,named:r}=t;return e(["You will receive ",n(r("fee"))," ",n(r("coin"))])},bridgeFeeAbove10:t=>{const{normalize:e,interpolate:n,named:r}=t;return e(["Bridge fee - ",n(r("fee"))," TON"])},bridgeFeeBelow10:t=>{const{normalize:e}=t;return e(["Bridge fee - 5 TON + 0.25% of amount"])},sourceCode:t=>{const{normalize:e}=t;return e(["Source Code"])},howItWorks:t=>{const{normalize:e}=t;return e(["How it works"])},documentation:t=>{const{normalize:e}=t;return e(["Documentation"])},transferHistory:t=>{const{normalize:e}=t;return e(["History"])},disconnectWallet:t=>{const{normalize:e}=t;return e(["Disconnect"])},transfer:t=>{const{normalize:e}=t;return e(["Transfer"])},getToncoin:t=>{const{normalize:e,interpolate:n,named:r}=t;return e(["Get ",n(r("coin"))])},done:t=>{const{normalize:e}=t;return e(["Done"])},cancel:t=>{const{normalize:e}=t;return e(["Cancel"])},blocksConfirmationsCollected:t=>{const{normalize:e}=t;return e(["The confirmations of the blocks are collected"])},blocksConfirmationsWaiting:t=>{const{normalize:e}=t;return e(["Wait a bit for the blocks confirmations"])},oraclesConfirmations:t=>{const{normalize:e,interpolate:n,named:r}=t;return e(["Collected ",n(r("count"))," confirmations of oracles"])},oraclesConfirmationsCollected:t=>{const{normalize:e}=t;return e(["The confirmations of the oracles are collected"])},oraclesConfirmationsWaiting:t=>{const{normalize:e}=t;return e(["Wait a bit for the oracles to confirm the transfer"])},getCoinsByProvider:t=>{const{normalize:e,interpolate:n,named:r}=t;return e(["Get ",n(r("toCoin")),"s by ",n(r("provider"))])},coinsSent:t=>{const{normalize:e,interpolate:n,named:r}=t;return e([n(r("toCoin")),"s have been sent to your address"])},getCoins:t=>{const{normalize:e,interpolate:n,named:r}=t;return e(["Get ",n(r("toCoin")),"s in ",n(r("toNetwork"))])},errors:{alertTitleError:t=>{const{normalize:e}=t;return e(["Error"])},alertButtonClose:t=>{const{normalize:e}=t;return e(["Close"])},notValidAmount:t=>{const{normalize:e}=t;return e(["Amount is not valid number"])},amountBelow10:t=>{const{normalize:e}=t;return e(["Amount must be at least 10 TON"])},needPersonalAddress:t=>{const{normalize:e}=t;return e(["Please enter YOUR address to receive"])},toncoinBalance:t=>{const{normalize:e,interpolate:n,named:r}=t;return e(["You have only ",n(r("balance"))," ",n(r("coin"))])},installMetamask:t=>{const{normalize:e}=t;return e(["Please install MetaMask"])},wrongProviderNetwork:t=>{const{normalize:e,interpolate:n,named:r}=t;return e(["Set chain to ",n(r("network"))," in ",n(r("provider"))])},cantGetAddress:t=>{const{normalize:e}=t;return e(["Can't get account address"])},providerIsDisconnected:t=>{const{normalize:e,interpolate:n,named:r}=t;return e([n(r("provider"))," is disconnected"])}},history:{title:t=>{const{normalize:e}=t;return e(["Recent history"])},recentHistory:t=>{const{normalize:e}=t;return e(["Recent history"])},age:t=>{const{normalize:e}=t;return e(["Date"])},amountFrom:t=>{const{normalize:e}=t;return e(["Amount / From (Network)"])},amountTo:t=>{const{normalize:e}=t;return e(["Amount Received / To (Network)"])},fee:t=>{const{normalize:e}=t;return e(["Gas / Bridge Fee"])},status:t=>{const{normalize:e}=t;return e(["Status"])},completed:t=>{const{normalize:e}=t;return e(["completed"])},getToncoin:t=>{const{normalize:e,interpolate:n,named:r}=t;return e(["Get ",n(r("coin"))])},connect:t=>{const{normalize:e}=t;return e(["Connect"])},oracles:t=>{const{normalize:e,interpolate:n,named:r}=t;return e([n(r("count"))," of oracles"])},notFound:t=>{const{normalize:e}=t;return e(["No transfers found"])}}},_={logoLabel:t=>{const{normalize:e}=t;return e(["Бридж"])},connectWallet:t=>{const{normalize:e}=t;return e(["Подключить Кошелек"])},testnetMessage:t=>{const{normalize:e}=t;return e(["Работа в режиме тестовой сети. Не отправляйте реальные монеты!"])},providers:{metamask:t=>{const{normalize:e}=t;return e(["Metamask"])},walletConnect:t=>{const{normalize:e}=t;return e(["WalletConnect"])},walletLink:t=>{const{normalize:e}=t;return e(["Coinbase Wallet"])}},networks:{ton:{currency:t=>{const{normalize:e}=t;return e(["Toncoin"])},transactionCompleted:t=>{const{normalize:e}=t;return e(["Транзакция TON успешно завершена"])},transactionSend1:t=>{const{normalize:e}=t;return e(["Пожалуйста, отправьте "])},transactionSend2:t=>{const{normalize:e}=t;return e(["Toncoin на адрес"])},transactionSendComment:t=>{const{normalize:e}=t;return e(["с комментарием"])},openWallet:t=>{const{normalize:e}=t;return e(["Открыть Кошелек"])},generateQRCode:t=>{const{normalize:e}=t;return e(["Сгенерировать QR-код"])},scanQRCode:t=>{const{normalize:e}=t;return e(["или отсканируйте QR-код ниже"])},errors:{invalidAddress:t=>{const{normalize:e}=t;return e(["Не валидный TON адрес"])}},main:{name:t=>{const{normalize:e}=t;return e(["The Open Network"])},nameSwitcher:t=>{const{normalize:e}=t;return e(["The Open\nNetwork"])},nameShort:t=>{const{normalize:e}=t;return e(["TON"])},coin:t=>{const{normalize:e}=t;return e(["Toncoin"])},coinShort:t=>{const{normalize:e}=t;return e(["Toncoin"])}},test:{name:t=>{const{normalize:e}=t;return e(["TON Testnet"])},nameSwitcher:t=>{const{normalize:e}=t;return e(["TON\nTestnet"])},nameShort:t=>{const{normalize:e}=t;return e(["TON"])},coin:t=>{const{normalize:e}=t;return e(["Toncoin"])},coinShort:t=>{const{normalize:e}=t;return e(["Toncoin"])}}},eth:{currency:t=>{const{normalize:e}=t;return e(["ETH"])},pageTitle:t=>{const{normalize:e}=t;return e(["TON-ETH Бридж"])},gasFee:t=>{const{normalize:e,interpolate:n,named:r}=t;return e(["Комиссия Ethereum (газ) ~ ",n(r("fee"))," ETH"])},transactionCompleted:t=>{const{normalize:e}=t;return e(["Транзакция Ethereum успешно завершена"])},transactionWait:t=>{const{normalize:e}=t;return e(["Пожалуйста, подождите пока обрабатывается транзакция Ethereum"])},transactionSend:t=>{const{normalize:e,interpolate:n,named:r}=t;return e(["Пожалуйста, подтвердите Ethereum транзакцию в ",n(r("provider"))])},blocksConfirmations:t=>{const{normalize:e,interpolate:n,named:r}=t;return e(["Собрано ",n(r("count"))," подтверждений блоков Ethereum"])},errors:{invalidAddress:t=>{const{normalize:e}=t;return e(["Не валидный ETH адрес"])},lowBalance:t=>{const{normalize:e}=t;return e(["У вас должны быть ETH в кошельке чтобы оплатить газ в сети Ethereum"])}},main:{name:t=>{const{normalize:e}=t;return e(["Ethereum Network"])},nameSwitcher:t=>{const{normalize:e}=t;return e(["Ethereum\nNetwork"])},nameShort:t=>{const{normalize:e}=t;return e(["ETH"])},coin:t=>{const{normalize:e}=t;return e(["TONCOIN (ERC20)"])},coinShort:t=>{const{normalize:e}=t;return e(["TONCOIN"])}},test:{name:t=>{const{normalize:e}=t;return e(["Ethereum Goerli"])},nameSwitcher:t=>{const{normalize:e}=t;return e(["Ethereum\nGoerli"])},nameShort:t=>{const{normalize:e}=t;return e(["ETH"])},coin:t=>{const{normalize:e}=t;return e(["TONCOIN (ERC20)"])},coinShort:t=>{const{normalize:e}=t;return e(["TONCOIN"])}}},bsc:{currency:t=>{const{normalize:e}=t;return e(["BNB"])},pageTitle:t=>{const{normalize:e}=t;return e(["TON-BSC Бридж"])},gasFee:t=>{const{normalize:e,interpolate:n,named:r}=t;return e(["Комиссия BSC (газ) ~ ",n(r("fee"))," BNB"])},transactionCompleted:t=>{const{normalize:e}=t;return e(["Транзакция BSC успешно завершена"])},transactionWait:t=>{const{normalize:e}=t;return e(["Пожалуйста, подождите пока обрабатывается транзакция BSC"])},transactionSend:t=>{const{normalize:e,interpolate:n,named:r}=t;return e(["Пожалуйста, подтвердите BSC транзакцию в ",n(r("provider"))])},blocksConfirmations:t=>{const{normalize:e,interpolate:n,named:r}=t;return e(["Собрано ",n(r("count"))," подтверждений блоков BSC"])},errors:{invalidAddress:t=>{const{normalize:e}=t;return e(["Не валидный BSC адрес"])},lowBalance:t=>{const{normalize:e}=t;return e(["У вас должны быть BNB в кошельке чтобы оплатить газ в сети BSC"])}},main:{name:t=>{const{normalize:e}=t;return e(["Binance Smart Chain"])},nameSwitcher:t=>{const{normalize:e}=t;return e(["Binance\nSmart Chain"])},nameShort:t=>{const{normalize:e}=t;return e(["BSC"])},coin:t=>{const{normalize:e}=t;return e(["TONCOIN (BEP-20)"])},coinShort:t=>{const{normalize:e}=t;return e(["TONCOIN"])}},test:{name:t=>{const{normalize:e}=t;return e(["BSC Testnet"])},nameSwitcher:t=>{const{normalize:e}=t;return e(["BSC\nTestnet"])},nameShort:t=>{const{normalize:e}=t;return e(["BSC"])},coin:t=>{const{normalize:e}=t;return e(["TONCOIN (BEP-20)"])},coinShort:t=>{const{normalize:e}=t;return e(["TONCOIN"])}}}},sendToken:t=>{const{normalize:e}=t;return e(["Токен"])},amountOfTon:t=>{const{normalize:e,interpolate:n,named:r}=t;return e(["Количество ",n(r("tokenSymbol"))])},tokenAddress:t=>{const{normalize:e}=t;return e(["Адрес токена"])},addressInputLabel:t=>{const{normalize:e}=t;return e(["Адрес получения"])},willReceive:t=>{const{normalize:e,interpolate:n,named:r}=t;return e(["Вы получите ",n(r("fee"))," ",n(r("coin"))])},bridgeFeeAbove10:t=>{const{normalize:e,interpolate:n,named:r}=t;return e(["Комиссия бриджа - ",n(r("fee"))," TON"])},bridgeFeeBelow10:t=>{const{normalize:e}=t;return e(["Комиссия бриджа - 5 TON + 0.25% of amount"])},sourceCode:t=>{const{normalize:e}=t;return e(["Исходный код"])},howItWorks:t=>{const{normalize:e}=t;return e(["Как это работает"])},documentation:t=>{const{normalize:e}=t;return e(["Документация"])},transferHistory:t=>{const{normalize:e}=t;return e(["История"])},disconnectWallet:t=>{const{normalize:e}=t;return e(["Отключить"])},transfer:t=>{const{normalize:e}=t;return e(["Перевод"])},getToncoin:t=>{const{normalize:e,interpolate:n,named:r}=t;return e(["Получить ",n(r("coin"))])},done:t=>{const{normalize:e}=t;return e(["Готово"])},cancel:t=>{const{normalize:e}=t;return e(["Отменить"])},blocksConfirmationsCollected:t=>{const{normalize:e}=t;return e(["Собраны подтверждения блоков"])},blocksConfirmationsWaiting:t=>{const{normalize:e}=t;return e(["Пожалуйста, подождите подтверждения блоков"])},oraclesConfirmations:t=>{const{normalize:e,interpolate:n,named:r}=t;return e(["Собрано ",n(r("count"))," подтверждений оракулов"])},oraclesConfirmationsCollected:t=>{const{normalize:e}=t;return e(["Собраны подтверждения оракулов"])},oraclesConfirmationsWaiting:t=>{const{normalize:e}=t;return e(["Пожалуйста, подождите подтверждения оракулов"])},getCoinsByProvider:t=>{const{normalize:e,interpolate:n,named:r}=t;return e(["Получите ",n(r("toCoin"))," в ",n(r("provider"))])},coinsSent:t=>{const{normalize:e,interpolate:n,named:r}=t;return e([n(r("toCoin"))," были отправлены на ваш адрес"])},getCoins:t=>{const{normalize:e,interpolate:n,named:r}=t;return e(["Получите ",n(r("toCoin"))," в ",n(r("toNetwork"))])},errors:{alertTitleError:t=>{const{normalize:e}=t;return e(["Ошибка"])},alertButtonClose:t=>{const{normalize:e}=t;return e(["Закрыть"])},notValidAmount:t=>{const{normalize:e}=t;return e(["Введено не валидное число"])},amountBelow10:t=>{const{normalize:e}=t;return e(["Количество должно быть не менее 10 TON"])},needPersonalAddress:t=>{const{normalize:e}=t;return e(["Пожалуйста, введите СВОЙ адрес для получения"])},toncoinBalance:t=>{const{normalize:e,interpolate:n,named:r}=t;return e(["У вас всего ",n(r("balance"))," ",n(r("coin"))])},installMetamask:t=>{const{normalize:e}=t;return e(["Пожалуйста, установите MetaMask"])},wrongProviderNetwork:t=>{const{normalize:e,interpolate:n,named:r}=t;return e(["Переключите сеть на ",n(r("network"))," в ",n(r("provider"))])},cantGetAddress:t=>{const{normalize:e}=t;return e(["Не могу получить адрес аккаунта"])},providerIsDisconnected:t=>{const{normalize:e,interpolate:n,named:r}=t;return e([n(r("provider"))," отключился"])}},history:{title:t=>{const{normalize:e}=t;return e(["История"])},recentHistory:t=>{const{normalize:e}=t;return e(["История"])},age:t=>{const{normalize:e}=t;return e(["Дата"])},amountFrom:t=>{const{normalize:e}=t;return e(["Количество / Откуда (сеть)"])},amountTo:t=>{const{normalize:e}=t;return e(["Получено / Куда (сеть)"])},fee:t=>{const{normalize:e}=t;return e(["Газ / Бридж комиссии"])},status:t=>{const{normalize:e}=t;return e(["Статус"])},completed:t=>{const{normalize:e}=t;return e(["завершено"])},getToncoin:t=>{const{normalize:e,interpolate:n,named:r}=t;return e(["Получить ",n(r("coin"))])},connect:t=>{const{normalize:e}=t;return e(["Подключить"])},oracles:t=>{const{normalize:e,interpolate:n,named:r}=t;return e([n(r("count"))," оракулов"])},notFound:t=>{const{normalize:e}=t;return e(["Переводы не найдены"])}}},B=(0,A.o)({legacy:!1,locale:navigator?.language?.split("-")?.[0]||"en",fallbackLocale:"en",messages:{en:I,ru:_}}),z=n(22483);const F=t=>((0,o.dD)("data-v-bd608f96"),t=t(),(0,o.Cn)(),t),N={class:"Bridge"},P=F((()=>(0,o._)("div",null,null,-1))),x=F((()=>(0,o._)("div",{class:"Bridge-imgAspect"},null,-1))),D=[x],E={class:"Bridge-form"},O={class:"Bridge-switcherTitle"},$=F((()=>(0,o._)("em",null,null,-1))),L=["disabled","onClick"],M={key:0,class:"Bridge-switcherAnno"},V=["disabled"],W={class:"Bridge-switcherTitle"},R=F((()=>(0,o._)("em",null,null,-1))),H=["disabled","onClick"],q={key:0,class:"Bridge-switcherAnno"},U=["href"],J={class:"Bridge-bridgeWrapper"},j={key:1,class:"Bridge-bridgeLoader"};function G(t,e,n,s,i,a){const l=(0,o.up)("Header"),d=(0,o.up)("CustomInput"),c=(0,o.up)("BridgeProcessor"),p=(0,o.up)("Footer"),h=(0,o.up)("WalletsPopup");return(0,o.wg)(),(0,o.iD)("div",N,[(0,o.Wm)(l,{"is-testnet":t.isTestnet,"show-menu":t.isConnected&&"closed"===t.walletsPopupState,provider:t.provider,"is-history-shown":t.history.isShown,"disable-disconnect":t.isTransferInProgress},null,8,["is-testnet","show-menu","provider","is-history-shown","disable-disconnect"]),(0,o._)("div",{class:"Bridge-content",style:(0,u.j5)(t.contentStyle)},[P,(0,o._)("main",null,[(0,o._)("div",{class:(0,u.C_)(["Bridge-img",{isFromTon:t.isFromTon}])},D,2),(0,o._)("div",E,[(0,o._)("div",{class:(0,u.C_)(["Bridge-switchers",{isFromTon:t.isFromTon}])},[(0,o._)("div",{class:(0,u.C_)(["Bridge-switcher",{disabled:t.isPairsBlocked}])},[(0,o._)("div",O,[(0,o._)("span",null,[(0,o.Uk)((0,u.zw)(t.$t(`networks.ton.${t.netTypeName}.nameSwitcher`)),1),$]),(0,o._)("ul",{class:(0,u.C_)(["Bridge-switcherList",{left:t.isFromTon,right:!t.isFromTon}])},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.fromPairs,((e,n)=>((0,o.wg)(),(0,o.iD)("li",{key:e},[(0,o._)("button",{disabled:0===n,onClick:n=>t.onPairClick(!0,e)},(0,u.zw)(t.$t(`networks.${e}.${t.netTypeName}.name`)),9,L)])))),128))],2)]),"ton"===t.token?((0,o.wg)(),(0,o.iD)("div",M,(0,u.zw)(t.$t(`networks.ton.${t.netTypeName}.coin`)),1)):(0,o.kq)("",!0)],2),(0,o._)("button",{class:"Bridge-switcher-arrow",disabled:t.isPairsBlocked,onClick:e[0]||(e[0]=(...e)=>t.toggleFromTon&&t.toggleFromTon(...e))},null,8,V),(0,o._)("div",{class:(0,u.C_)(["Bridge-switcher",{disabled:t.isPairsBlocked}])},[(0,o._)("div",W,[(0,o._)("span",null,[(0,o.Uk)((0,u.zw)(t.$t(`networks.${t.pair}.${t.netTypeName}.nameSwitcher`)),1),R]),(0,o._)("ul",{class:(0,u.C_)(["Bridge-switcherList",{left:!t.isFromTon,right:t.isFromTon}])},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.toPairs,((e,n)=>((0,o.wg)(),(0,o.iD)("li",{key:e},[(0,o._)("button",{disabled:0===n,onClick:n=>t.onPairClick("ton"===e,"ton"===e?t.pair:e)},(0,u.zw)(t.$t(`networks.${e}.${t.netTypeName}.name`)),9,H)])))),128))],2)]),"ton"===t.token?((0,o.wg)(),(0,o.iD)("div",q,[(0,o._)("a",{href:t.pairNetworkCoinUrl,target:"_blank"},(0,u.zw)(t.$t(`networks.${t.pair}.${t.netTypeName}.coin`)),9,U)])):(0,o.kq)("",!0)],2)],2),(0,o.Wm)(d,{key:"token",disabled:t.isInputsBlocked||!this.isTestnet,label:t.$t("sendToken"),type:"text",dropdown:[{label:"Toncoin",value:"ton"},{label:"Other tokens",value:"otherTokens"}],modelValue:t.token,"onUpdate:modelValue":e[1]||(e[1]=e=>t.token=e)},null,8,["disabled","label","modelValue"]),"ton"!==t.token?((0,o.wg)(),(0,o.j4)(d,{key:"tokenAddress",disabled:t.isInputsBlocked,label:t.$t("tokenAddress"),type:"text",error:t.errors.tokenAddress,onChanged:e[2]||(e[2]=e=>t.errors.tokenAddress=""),onBlur:t.checkInputs,modelValue:t.tokenAddress,"onUpdate:modelValue":e[3]||(e[3]=e=>t.tokenAddress=e)},null,8,["disabled","label","error","onBlur","modelValue"])):(0,o.kq)("",!0),(0,o.Wm)(d,{key:"amountInput",disabled:t.isInputsBlocked,label:t.$t("amountOfTon",{tokenSymbol:t.tokenSymbol}),type:"number",error:t.errors.amount,onChanged:e[4]||(e[4]=e=>t.errors.amount=""),onBlur:t.checkInputs,modelValue:t.amountInput,"onUpdate:modelValue":e[5]||(e[5]=e=>t.amountInput=e)},null,8,["disabled","label","error","onBlur","modelValue"]),(0,o.Wm)(d,{key:"toAddress",disabled:t.isInputsBlocked,label:t.$t("addressInputLabel"),type:"text",error:t.errors.toAddress,onChanged:e[6]||(e[6]=e=>t.errors.toAddress=""),onBlur:t.checkInputs,modelValue:t.toAddress,"onUpdate:modelValue":e[7]||(e[7]=e=>t.toAddress=e)},null,8,["disabled","label","error","onBlur","modelValue"]),(0,o.wy)((0,o._)("div",{class:(0,u.C_)(["Bridge-willReceive",{isFromTon:t.isFromTon}])},(0,u.zw)(t.willReceive),3),[[r.F8,(!t.isTransferInProgress||!t.isConnected||t.bridgeProcessorIsLoading)&&t.willReceive]]),(0,o._)("div",J,[t.isConnected?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("button",{key:0,class:"Bridge-connect",onClick:e[8]||(e[8]=e=>t.walletsPopupState="opened")},(0,u.zw)(t.$t("connectWallet")),1)),t.isConnected&&t.bridgeProcessorIsLoading?((0,o.wg)(),(0,o.iD)("div",j)):(0,o.kq)("",!0),t.isConnected?((0,o.wg)(),(0,o.j4)(c,{ref:"bridgeProcessor",key:t.pair,"is-testnet":t.isTestnet,"is-recover":t.isRecover,lt:t.lt,hash:t.hash,"is-from-ton":t.isFromTon,pair:t.pair,tokenAddress:t.tokenAddress,amount:t.amount,"to-address":t.toAddress,tokenSymbol:t.tokenSymbol,provider:t.provider,token:t.token,"is-inputs-valid":t.isInputsValid,onTransferInProgress:t.onTransferInProgress,onStateChanged:t.getPairGasFee__debounced,onResetState:t.resetState,onSaveState:t.saveState,onDeleteState:t.deleteState,onReady:t.onBridgeProcessorReady,onError:t.onBridgeTransferError},null,8,["is-testnet","is-recover","lt","hash","is-from-ton","pair","tokenAddress","amount","to-address","tokenSymbol","provider","token","is-inputs-valid","onTransferInProgress","onStateChanged","onResetState","onSaveState","onDeleteState","onReady","onError"])):(0,o.kq)("",!0)]),(0,o.wy)((0,o._)("div",{class:"Bridge-pairFee"},(0,u.zw)(t.pairFee),513),[[r.F8,!t.isTransferInProgress||!t.isConnected||t.bridgeProcessorIsLoading]]),(0,o.wy)((0,o._)("div",{class:"Bridge-bridgeFee"},(0,u.zw)(t.bridgeFee),513),[[r.F8,!t.isTransferInProgress||!t.isConnected||t.bridgeProcessorIsLoading]])])]),(0,o.Wm)(p)],4),"closed"!==t.walletsPopupState?((0,o.wg)(),(0,o.j4)(h,{key:0,params:t.params,uncancellable:"opened-uncancellable"===t.walletsPopupState,onWalletConnected:t.onWalletConnected,onCancel:e[9]||(e[9]=e=>t.walletsPopupState="closed")},null,8,["params","uncancellable","onWalletConnected"])):(0,o.kq)("",!0)])}var Q=n(2396),Z=n.n(Q),K=n(80354),X=n.n(K),Y=n(34738),tt=n.n(Y),et=n(44870),nt=n(21832),rt=n.n(nt);n(63408),n(14590);const st=(t,e,n)=>{let r=BigInt(0);for(let s=0;s<n;s++)r*=BigInt(2),r+=BigInt(t.get(e+s));return r},ot=t=>{let e=st(t.bits,3,8);e>BigInt(127)&&(e-=BigInt(256));const n=st(t.bits,11,256);if(e.toString(10)+":"+n.toString(16)==="0:0")return null;const r=e.toString(10)+":"+n.toString(16).padStart(64,"0");return new(tt().Address)(r)};async function it(t,e){const n=await t.provider.call2(e,"get_wallet_data"),r=n[0],s=ot(n[1]),o=ot(n[2]),i=n[3];return{balance:r,ownerAddress:s,jettonMinterAddress:o,jettonWalletCode:i}}async function at(t,e){const n=await t.provider.call2(e,"get_wrapped_token_data",[]),r=n[0].toString(),s="0x"+n[1].toString("hex"),o=n[2].toString();return{chainId:r,tokenAddress:s,decimals:o}}async function lt({tonweb:t,userTonAddress:e,tokenAddress:n}){const r=new(tt().boc.Cell);r.bits.writeAddress(e);const s=await t.provider.call2(n,"get_wallet_address",[["tvm.Slice",tt().utils.bytesToBase64(await r.toBoc(!1))]]),o=ot(s);return o}const dt=t=>((0,o.dD)("data-v-62be8e14"),t=t(),(0,o.Cn)(),t),ct={class:"BridgeProcessor"},ut=["disabled"],pt={key:3,class:"BridgeProcessor-infoWrapper"},ht={key:0,class:"BridgeProcessor-infoLine"},mt={key:0,class:"BridgeProcessor-info-text"},yt={class:"BridgeProcessor-info-text-send"},gt=dt((()=>(0,o._)("br",null,null,-1))),wt=dt((()=>(0,o._)("br",null,null,-1))),bt=dt((()=>(0,o._)("br",null,null,-1))),Tt=dt((()=>(0,o._)("br",null,null,-1))),ft={class:"BridgeProcessor-info-text-send-buttons"},vt=["href"],kt={key:1,class:"BridgeProcessor-info-text-scanQRCode"},Ct={class:"BridgeProcessor-info-text-QRCode",ref:"qrcode"},St={key:1,class:"BridgeProcessor-info-text"},At={key:1,class:"BridgeProcessor-infoLine"},It={class:"BridgeProcessor-info-text"},_t={class:"BridgeProcessor-infoLine"},Bt={class:"BridgeProcessor-info-text"},zt={class:"BridgeProcessor-infoLine"},Ft={class:"BridgeProcessor-info-text"};function Nt(t,e,n,s,i,a){return(0,o.wg)(),(0,o.iD)("div",ct,[0===t.state.step&&(t.isFromTon||t.hasApprove||"ton"===t.token)?((0,o.wg)(),(0,o.iD)("button",{key:0,class:(0,u.C_)(["BridgeProcessor-transfer",{showLoader:t.isInitInProgress||t.isBurningInProgress||t.isLockingInProgress}]),disabled:!t.isInputsValid,onClick:e[0]||(e[0]=(...e)=>t.onTransferClick&&t.onTransferClick(...e))},(0,u.zw)(t.$t("transfer")),11,ut)):(0,o.kq)("",!0),0!==t.state.step||t.isFromTon||t.hasApprove||"ton"===t.token?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("button",{key:1,class:(0,u.C_)(["BridgeProcessor-transfer",{showLoader:t.isApprovingInProgress}]),onClick:e[1]||(e[1]=(...e)=>t.approve&&t.approve(...e))}," Approve ",2)),t.isCancelVisible?((0,o.wg)(),(0,o.iD)("button",{key:2,class:"BridgeProcessor-cancel",onClick:e[2]||(e[2]=(...e)=>t.onCancelClick&&t.onCancelClick(...e))},(0,u.zw)(t.$t("cancel")),1)):(0,o.kq)("",!0),t.state.step>0?((0,o.wg)(),(0,o.iD)("div",pt,["ton"===t.token?((0,o.wg)(),(0,o.iD)("div",ht,[(0,o._)("div",{class:(0,u.C_)(["BridgeProcessor-info-icon",{none:t.state.step<1,pending:1===t.state.step,done:t.state.step>1}])},null,2),t.getStepInfoText1.isOnlyText?((0,o.wg)(),(0,o.iD)("div",St,(0,u.zw)(t.getStepInfoText1.text),1)):((0,o.wg)(),(0,o.iD)("div",mt,[(0,o._)("div",yt,[(0,o._)("div",null,[(0,o.Uk)((0,u.zw)(t.getStepInfoText1.send1)+" ",1),(0,o._)("button",{class:"BridgeProcessor-info-text-copy",onClick:e[3]||(e[3]=(...e)=>t.onCopyClick&&t.onCopyClick(...e))},(0,u.zw)(t.getStepInfoText1.amountReadable),1),(0,o.Uk)(" "+(0,u.zw)(t.getStepInfoText1.send2),1),gt,(0,o._)("button",{class:"BridgeProcessor-info-text-copy",onClick:e[4]||(e[4]=(...e)=>t.onCopyClick&&t.onCopyClick(...e))},(0,u.zw)(t.getStepInfoText1.toAddress),1),wt,(0,o.Uk)(" "+(0,u.zw)(t.getStepInfoText1.withComment),1),bt,(0,o._)("button",{class:"BridgeProcessor-info-text-copy",onClick:e[5]||(e[5]=(...e)=>t.onCopyClick&&t.onCopyClick(...e))},(0,u.zw)(t.getStepInfoText1.comment),1),Tt]),(0,o._)("div",ft,[(0,o._)("a",{href:t.getStepInfoText1.openWalletUrl,class:"BridgeProcessor-info-text-openWallet",target:"_blank"},(0,u.zw)(t.getStepInfoText1.openWalletLabel),9,vt),t.isQRCodeShown?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("button",{key:0,class:"BridgeProcessor-info-text-generateQRCode",onClick:e[6]||(e[6]=(...e)=>t.generateQRCode&&t.generateQRCode(...e))},(0,u.zw)(t.getStepInfoText1.generateQRCode),1)),t.isQRCodeShown?((0,o.wg)(),(0,o.iD)("div",kt,(0,u.zw)(t.getStepInfoText1.scanQRCode),1)):(0,o.kq)("",!0),(0,o.wy)((0,o._)("div",Ct,null,512),[[r.F8,t.isQRCodeShown]])])])]))])):(0,o.kq)("",!0),t.isFromTon?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",At,[(0,o._)("div",{class:(0,u.C_)(["BridgeProcessor-info-icon",{none:t.state.step<2,pending:2===t.state.step,done:t.state.step>2}])},null,2),(0,o._)("div",It,(0,u.zw)(t.getStepInfoText2),1)])),(0,o._)("div",_t,[(0,o._)("div",{class:(0,u.C_)(["BridgeProcessor-info-icon",{none:t.state.step<3,pending:3===t.state.step,done:t.state.step>3}])},null,2),(0,o._)("div",Bt,(0,u.zw)(t.getStepInfoText3),1)]),(0,o._)("div",zt,[(0,o._)("div",{class:(0,u.C_)(["BridgeProcessor-info-icon",{none:t.state.step<4,pending:4===t.state.step,done:t.state.step>4}])},null,2),(0,o._)("div",Ft,(0,u.zw)(t.getStepInfoText4),1)])])):(0,o.kq)("",!0),t.isGetTonCoinVisible?((0,o.wg)(),(0,o.iD)("button",{key:4,class:(0,u.C_)(["BridgeProcessor-getTonCoin",{showLoader:t.isMintingInProgress}]),onClick:e[7]||(e[7]=(...e)=>t.mint&&t.mint(...e))},(0,u.zw)(t.$t("getToncoin",{coin:t.toCoin})),3)):(0,o.kq)("",!0),t.isDoneVisible?((0,o.wg)(),(0,o.iD)("button",{key:5,class:"BridgeProcessor-done",onClick:e[8]||(e[8]=(...e)=>t.onDoneClick&&t.onDoneClick(...e))},(0,u.zw)(t.$t("done")),1)):(0,o.kq)("",!0)])}var Pt=n(5554),xt=n(57647),Dt=n(36482),Et=n(74806),Ot=n(19998),$t=n.n(Ot),Lt=JSON.parse('{"Mt":[{"inputs":[{"internalType":"address[]","name":"initialSet","type":"address[]"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"token","type":"address"},{"indexed":true,"internalType":"bytes32","name":"to_addr_hash","type":"bytes32"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"},{"indexed":false,"internalType":"uint8","name":"decimals","type":"uint8"}],"name":"Lock","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"oracleSetHash","type":"uint256"},{"indexed":false,"internalType":"address[]","name":"newOracles","type":"address[]"}],"name":"NewOracleSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"token","type":"address"},{"indexed":false,"internalType":"bytes32","name":"ton_address_hash","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"ton_tx_hash","type":"bytes32"},{"indexed":false,"internalType":"uint64","name":"lt","type":"uint64"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Unlock","type":"event"},{"inputs":[],"name":"allowLock","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"digest","type":"bytes32"},{"components":[{"internalType":"address","name":"signer","type":"address"},{"internalType":"bytes","name":"signature","type":"bytes"}],"internalType":"struct TonUtils.Signature","name":"sig","type":"tuple"}],"name":"checkSignature","outputs":[],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"address","name":"token","type":"address"}],"name":"checkTokenIsWrappedJetton","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"name":"finishedVotings","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getFullOracleSet","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bool","name":"newLockStatus","type":"bool"},{"internalType":"uint256","name":"nonce","type":"uint256"}],"name":"getNewLockStatusId","outputs":[{"internalType":"bytes32","name":"result","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"oracleSetHash","type":"uint256"},{"internalType":"address[]","name":"set","type":"address[]"}],"name":"getNewSetId","outputs":[{"internalType":"bytes32","name":"result","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"components":[{"internalType":"address","name":"receiver","type":"address"},{"internalType":"address","name":"token","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"components":[{"internalType":"bytes32","name":"address_hash","type":"bytes32"},{"internalType":"bytes32","name":"tx_hash","type":"bytes32"},{"internalType":"uint64","name":"lt","type":"uint64"}],"internalType":"struct TonUtils.TonTxID","name":"tx","type":"tuple"}],"internalType":"struct TonUtils.SwapData","name":"data","type":"tuple"}],"name":"getSwapDataId","outputs":[{"internalType":"bytes32","name":"result","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"isOracle","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"bytes32","name":"to_address_hash","type":"bytes32"}],"name":"lock","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"components":[{"internalType":"address","name":"receiver","type":"address"},{"internalType":"address","name":"token","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"components":[{"internalType":"bytes32","name":"address_hash","type":"bytes32"},{"internalType":"bytes32","name":"tx_hash","type":"bytes32"},{"internalType":"uint64","name":"lt","type":"uint64"}],"internalType":"struct TonUtils.TonTxID","name":"tx","type":"tuple"}],"internalType":"struct TonUtils.SwapData","name":"data","type":"tuple"},{"components":[{"internalType":"address","name":"signer","type":"address"},{"internalType":"bytes","name":"signature","type":"bytes"}],"internalType":"struct TonUtils.Signature[]","name":"signatures","type":"tuple[]"}],"name":"unlock","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"oracleSetHash","type":"uint256"},{"internalType":"address[]","name":"newOracles","type":"address[]"},{"components":[{"internalType":"address","name":"signer","type":"address"},{"internalType":"bytes","name":"signature","type":"bytes"}],"internalType":"struct TonUtils.Signature[]","name":"signatures","type":"tuple[]"}],"name":"voteForNewOracleSet","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"newLockStatus","type":"bool"},{"internalType":"uint256","name":"nonce","type":"uint256"},{"components":[{"internalType":"address","name":"signer","type":"address"},{"internalType":"bytes","name":"signature","type":"bytes"}],"internalType":"struct TonUtils.Signature[]","name":"signatures","type":"tuple[]"}],"name":"voteForSwitchLock","outputs":[],"stateMutability":"nonpayable","type":"function"}]}'),Mt=JSON.parse('[{"inputs":[{"internalType":"string","name":"name_","type":"string"},{"internalType":"string","name":"symbol_","type":"string"},{"internalType":"address[]","name":"initialSet","type":"address[]"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"int256","name":"oracleSetHash","type":"int256"},{"indexed":false,"internalType":"address[]","name":"newOracles","type":"address[]"}],"name":"NewOracleSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":false,"internalType":"int8","name":"to_wc","type":"int8"},{"indexed":true,"internalType":"bytes32","name":"to_addr_hash","type":"bytes32"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"SwapEthToTon","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"int8","name":"workchain","type":"int8"},{"indexed":true,"internalType":"bytes32","name":"ton_address_hash","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"ton_tx_hash","type":"bytes32"},{"indexed":false,"internalType":"uint64","name":"lt","type":"uint64"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"SwapTonToEth","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[],"name":"allowBurn","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"components":[{"internalType":"int8","name":"workchain","type":"int8"},{"internalType":"bytes32","name":"address_hash","type":"bytes32"}],"internalType":"struct TonUtils.TonAddress","name":"addr","type":"tuple"}],"name":"burn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"components":[{"internalType":"int8","name":"workchain","type":"int8"},{"internalType":"bytes32","name":"address_hash","type":"bytes32"}],"internalType":"struct TonUtils.TonAddress","name":"addr","type":"tuple"}],"name":"burnFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"digest","type":"bytes32"},{"components":[{"internalType":"address","name":"signer","type":"address"},{"internalType":"bytes","name":"signature","type":"bytes"}],"internalType":"struct TonUtils.Signature","name":"sig","type":"tuple"}],"name":"checkSignature","outputs":[],"stateMutability":"pure","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"name":"finishedVotings","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getFullOracleSet","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bool","name":"newBurnStatus","type":"bool"},{"internalType":"int256","name":"nonce","type":"int256"}],"name":"getNewBurnStatusId","outputs":[{"internalType":"bytes32","name":"result","type":"bytes32"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"int256","name":"oracleSetHash","type":"int256"},{"internalType":"address[]","name":"set","type":"address[]"}],"name":"getNewSetId","outputs":[{"internalType":"bytes32","name":"result","type":"bytes32"}],"stateMutability":"pure","type":"function"},{"inputs":[{"components":[{"internalType":"address","name":"receiver","type":"address"},{"internalType":"uint64","name":"amount","type":"uint64"},{"components":[{"components":[{"internalType":"int8","name":"workchain","type":"int8"},{"internalType":"bytes32","name":"address_hash","type":"bytes32"}],"internalType":"struct TonUtils.TonAddress","name":"address_","type":"tuple"},{"internalType":"bytes32","name":"tx_hash","type":"bytes32"},{"internalType":"uint64","name":"lt","type":"uint64"}],"internalType":"struct TonUtils.TonTxID","name":"tx","type":"tuple"}],"internalType":"struct TonUtils.SwapData","name":"data","type":"tuple"}],"name":"getSwapDataId","outputs":[{"internalType":"bytes32","name":"result","type":"bytes32"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"isOracle","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"oraclesSet","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"name":"receivedVotes","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"},{"internalType":"address","name":"","type":"address"}],"name":"unfinishedVotings","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"components":[{"internalType":"address","name":"receiver","type":"address"},{"internalType":"uint64","name":"amount","type":"uint64"},{"components":[{"components":[{"internalType":"int8","name":"workchain","type":"int8"},{"internalType":"bytes32","name":"address_hash","type":"bytes32"}],"internalType":"struct TonUtils.TonAddress","name":"address_","type":"tuple"},{"internalType":"bytes32","name":"tx_hash","type":"bytes32"},{"internalType":"uint64","name":"lt","type":"uint64"}],"internalType":"struct TonUtils.TonTxID","name":"tx","type":"tuple"}],"internalType":"struct TonUtils.SwapData","name":"data","type":"tuple"},{"components":[{"internalType":"address","name":"signer","type":"address"},{"internalType":"bytes","name":"signature","type":"bytes"}],"internalType":"struct TonUtils.Signature[]","name":"signatures","type":"tuple[]"}],"name":"voteForMinting","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"int256","name":"oracleSetHash","type":"int256"},{"internalType":"address[]","name":"newOracles","type":"address[]"},{"components":[{"internalType":"address","name":"signer","type":"address"},{"internalType":"bytes","name":"signature","type":"bytes"}],"internalType":"struct TonUtils.Signature[]","name":"signatures","type":"tuple[]"}],"name":"voteForNewOracleSet","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"newBurnStatus","type":"bool"},{"internalType":"int256","name":"nonce","type":"int256"},{"components":[{"internalType":"address","name":"signer","type":"address"},{"internalType":"bytes","name":"signature","type":"bytes"}],"internalType":"struct TonUtils.Signature[]","name":"signatures","type":"tuple[]"}],"name":"voteForSwitchBurn","outputs":[],"stateMutability":"nonpayable","type":"function"}]');n(57658);async function Vt({tonwebWallet:t,destinationAddress:e,userTonAddress:n,jettonWalletAddress:r,jettonAmountWithDecimals:s}){if(!r)return;const o=1499400124,i=new(tt().utils.BN)(0),a=new(tt().boc.Cell);a.bits.writeUint(o,32);const l=new(tt().boc.Cell);l.bits.writeUint(e,160),a.bits.writeUint(i,64),a.bits.writeCoins(s),a.bits.writeAddress(n),a.bits.writeBit(1),a.refs.push(l),await t.provider.send("ton_sendTransaction",[{to:r?.toString(!0,!0,!0),value:tt().utils.toNano("1").toString(),data:tt().utils.bytesToBase64(await a.toBoc()),dataType:"boc"}])}async function Wt({tonwebWallet:t,queryId:e,bridgeTonAddress:n}){const r=8,s=new(tt().boc.Cell);s.bits.writeUint(r,32),s.bits.writeUint(new(tt().utils.BN)(e),64),await t.provider.send("ton_sendTransaction",[{to:n,value:tt().utils.toNano("1").toString(),data:tt().utils.bytesToBase64(await s.toBoc()),dataType:"boc"}])}function Rt(t){const e=t.target;let n,r;const s=t=>{e&&(e.classList.remove(t),clearTimeout(n),clearTimeout(r),n=setTimeout((()=>{e.classList.add(t)}),17),r=setTimeout((()=>{e.classList.remove(t)}),500))};navigator&&navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(e.innerText).then((function(){s("success")}),(function(){s("failure")})):s("failure")}var Ht=n(97450),qt=n(15941);tt().utils.BN;const Ut=t=>parseInt(t[1],16),Jt=t=>{if(!t)return null;for(const e of t)if(""===e.destination)return e;return null},jt=t=>{const e=t.message.substr(0,t.message.length-1);return tt().utils.base64ToBytes(e)},Gt=t=>{const e=t.msg_data?.text,n=tt().utils.base64ToBytes(e),r=new Uint8Array(n.length+4);return r.set(n,4),r},Qt=t=>{const e=t.msg_data["@type"];return"msg.dataText"===e?Gt(t):"msg.dataRaw"===e?jt(t):(qt.error("Unknown log msg type "+e),null)},Zt=t=>{if(!t.startsWith("0x"))throw new Error("Invalid address "+t);let e=t.substr(2);while(e.length<40)e="0"+e;return"0x"+e};var Kt=n(15941);const Xt=t=>"0x"+new(tt().utils.BN)(t).toString(16),Yt=t=>{const e=t.tuple.elements,n=Zt(Xt(e[0].number.number)),r=e[1].tuple.elements,s=Xt(r[0].number.number),o=Xt(r[1].number.number),i=Number(r[2].number.number);return{publicKey:n,r:s,s:o,v:i}};async function te(t,e,n){const r=new(tt().utils.BN)(n.substr(2),16).toString();Kt.log("getEvmSignaturesFromCollector ",n,r);const s=await t.provider.call(e,"get_external_voting_data",[["num",r]]);if(Kt.log("getEvmSignaturesFromCollector raw result",s),309===s.exit_code)return Kt.log("getEvmSignaturesFromCollector 309 no found"),null;const o=s.stack[0][1].elements,i={signatures:o.map(Yt)};return Kt.log("getEvmSignaturesFromCollector parsed result",i),i}function ee(t){const e=rt().utils.sha3(t);if(!e)throw new Error("empty hash");return e}const ne=2592e3;function re(t){const e=2,n=t.blockTime+ne+e;function r(t){const e=t.split("");return e[66]="0",e[67]="0",e[68]="0",e[69]="0",e[133]=e[132],e[132]="0",e.join("")}const s=ee(r(t.blockHash+"_"+t.transactionHash+"_"+String(t.logIndex))).substr(2,8);return new(tt().utils.BN)(n).mul(new(tt().utils.BN)(4294967296)).add(new(tt().utils.BN)(s,16))}var se=n(82482),oe=n(76796);class ie{constructor(t){(0,se.Z)(this,"contracts",{}),(0,se.Z)(this,"provider",void 0),this.provider=t}_getContract(t){return Object.keys(this.contracts).includes(t)&&this.contracts[t].provider?this.contracts[t]:this._registerContract(t)}_registerContract(t){const e=new oe.CH(t,Lt.Mt,this.provider.provider);return this.contracts[t]=e,e}symbol(t){const e=this._getContract(t);return e.symbol()}lock({address:t,token:e,amount:n,to_address_hash:r}){const s=this._getContract(t);return s.connect(this.provider.provider.getSigner()).lock(e,n,r)}unlock({bridgeAddress:t,ethReceiver:e,token:n,jettonAmount:r,tx:s,signatures:o}){const i=this._getContract(t),a=i.connect(this.provider.provider.getSigner()).unlock({receiver:e,token:n,amount:r,tx:{address_hash:s.address_.address_hash,tx_hash:s.tx_hash,lt:s.lt}},o);return a}}var ae=JSON.parse('{"Mt":[{"inputs":[{"internalType":"string","name":"name_","type":"string"},{"internalType":"string","name":"symbol_","type":"string"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]}');class le{constructor(t){(0,se.Z)(this,"contracts",{}),(0,se.Z)(this,"provider",void 0),this.provider=t}_getContract(t){return Object.keys(this.contracts).includes(t)&&this.contracts[t].provider?this.contracts[t]:this._registerContract(t)}_registerContract(t){const e=new oe.CH(t,ae.Mt,this.provider.provider);return this.contracts[t]=e,e}symbol(t){const e=this._getContract(t);return e.symbol()}decimals({address:t}){const e=this._getContract(t);return e.decimals()}balanceOf({address:t,account:e}){const n=this._getContract(t);return n.balanceOf(e)}allowance({address:t,owner:e,spender:n}){const r=this._getContract(t);return r.allowance(e,n)}approve({address:t,spender:e,amount:n}){const r=this._getContract(t);return r.connect(this.provider.provider.getSigner()).approve(e,n)}}const de=12;function ce(t,e){const n=t[e];if(null===n||void 0===n)throw new Error('no "'+e+'"');return n}function ue(t,e){const n=ce(t,e);if(66!==n.length||!n.startsWith("0x"))throw new Error("invalid eth tx hash "+n);return n.toLowerCase()}function pe(t,e){const n=ce(t,e);if(66!==n.length||!n.startsWith("0x"))throw new Error("invalid eth block hash "+n);return n.toLowerCase()}function he(t,e){const n=ce(t,e);if(42!==n.length||!n.startsWith("0x"))throw new Error("invalid eth address "+n);return n.toLowerCase()}function me(t,e){const n=Number(ce(t,e));if(isNaN(n))throw new Error("invalid number "+n);if(n<0)throw new Error("number is negative "+n);return n}function ye(t,e){const n=ce(t,e);if(66!==n.length||!n.startsWith("0x"))throw new Error("invalid ton address "+n);return n.slice(2).toLowerCase()}function ge(t,e){const n=Number(ce(t,e));if(0!==n&&-1!==n)throw new Error("invalid wc "+n);return n}function we(t,e){const n=Number(ce(t,e));if(!(n>=0&&n<=255))throw new Error("invalid decimals "+n);return n}function be(t,e){const n=ce(t,e),r=new(tt().utils.BN)(n);if(r.lte(new(tt().utils.BN)(0)))throw new Error("bn is negative "+n);return n}var Te=n(15941);const fe=tt().utils.BN,ve=202,ke="0xe057fbff";class Ce{static getFeeAmount(t){const e=new fe(5e9),n=new fe(25),r=new fe(1e4),s=t.sub(e),o=s.mul(n).div(r);return e.add(o)}static getDataId(t,e,n){return ee(n?t.eth.abi.encodeParameters(["int","address","address","uint256","int8","bytes32","bytes32","uint64"],[55930,n,e.receiver,e.amount,e.tx.address_.workchain,e.tx.address_.address_hash,e.tx.tx_hash,e.tx.lt]):t.eth.abi.encodeParameters(["int","address","uint256","int8","bytes32","bytes32","uint64"],[55930,e.receiver,e.amount,e.tx.address_.workchain,e.tx.address_.address_hash,e.tx.tx_hash,e.tx.lt]))}static getNewSetId(t,e,n,r){return ee(r?t.eth.abi.encodeParameters(["int","address","int","address[]"],[1511,r,e,n]):t.eth.abi.encodeParameters(["int","int","address[]"],[1511,e,n]))}static getNewBurnStatusId(t,e,n,r){return ee(r?t.eth.abi.encodeParameters(["int","address","bool","int"],[45074,r,e,n]):t.eth.abi.encodeParameters(["int","bool","int"],[45074,e,n]))}static createMultisigMsgBody(t){const e=new(tt().boc.Cell);return e.bits.writeUint(4,32),e.bits.writeUint(0,8),e.bits.writeUint(new(tt().utils.BN)(t.transactionHash.substr(2),16),256),e.bits.writeInt(t.logIndex,16),e.bits.writeInt(t.to.workchain,8),e.bits.writeUint(new(tt().utils.BN)(t.to.address_hash,16),256),e.bits.writeUint(new(tt().utils.BN)(t.value),64),e}}(0,se.Z)(Ce,"findLog",((t,e,n,r,s,o)=>{let i=0,a=null;for(const l of o)if(3===l.topics.length&&l.topics[1].toLowerCase().endsWith(e.substr(2))&&l.topics[2]==="0x"+s){const e=t.eth.abi.decodeParameters(["int256","uint256"],l.data);e[0]===r&&e[1]===n&&(a=l,i++)}if(i>1)throw new Error("too many logs");return a})),(0,se.Z)(Ce,"isValidBurn",((t,e)=>t.to.toLowerCase()===e.toLowerCase()&&(t.from.toLowerCase()!==e.toLowerCase()&&("0"===t.isError&&("1"===t.txreceipt_status&&(!!t.input&&(t.input.length===ve&&(!!t.input.startsWith(ke)&&!(t.confirmations<de))))))))),(0,se.Z)(Ce,"processEvmTransaction",(async(t,e,n,r,s)=>{const o=me(n,"blockNumber"),i=ue(n,"hash"),a=me(n,"timeStamp"),l=pe(n,"blockHash"),d=me(n,"transactionIndex"),c=he(n,"from"),u=(he(n,"to"),n.input);if(u.length!==ve)throw new Error("invalid input length "+u);if(!u.startsWith(ke))throw new Error(`input ${ke} `+u);const p=t.eth.abi.decodeParameters(["uint256","int8","bytes32"],"0x"+u.slice(10)),h=be(p,"0"),m=ge(p,"1"),y=ye(p,"2");if(!r||0===Object.keys(r).length)throw new Error("no receipt");if(l!==r.blockHash.toLowerCase())throw new Error("invalid blockHash");if(o!==r.blockNumber)throw new Error("invalid blockNumber");if(c!==r.from.toLowerCase())throw new Error("invalid from");if(!r.status)throw new Error("invalid status");if(e.toLowerCase()!==r.to.toLowerCase())throw new Error("invalid to");if(i!==r.transactionHash.toLowerCase())throw new Error("invalid transactionHash");if(d!==r.transactionIndex)throw new Error("invalid transactionIndex");const g=Ce.findLog(t,c,h,m.toString(),y,r.logs);if(!g)throw new Error("cant find log");const w=me(g,"logIndex");if(s-r.blockNumber<de)throw new Error("No block confirmations "+(s-r.blockNumber)+"("+s+"-"+r.blockNumber+")");return{type:"SwapEthToTon",transactionHash:i,logIndex:w,blockNumber:o,blockTime:a,blockHash:l,from:c,to:{workchain:m,address_hash:y},value:h,rawData:g.data,topics:g.topics,transactionIndex:d}})),(0,se.Z)(Ce,"processTonTransaction",(t=>{const e=Jt(t.out_msgs);if(!e)return null;const n=Qt(e);if(null===n)return null;if(28!==n.length)return null;const r=Zt("0x"+tt().utils.bytesToHex(n.slice(0,20))),s=tt().utils.bytesToHex(n.slice(20,28)),o=new fe(s,16),i=new(tt().utils.Address)(t.in_msg.source),a=(new TextDecoder).decode(tt().utils.base64ToBytes(t.in_msg.msg_data.text)).slice("swapTo#".length);if(r.toLowerCase()!==a.toLowerCase())return Te.error("address from in_msg doesnt match ",a,r),null;const l=new fe(t.in_msg.value),d=l.sub(Ce.getFeeAmount(l));return o.eq(d)?{type:"SwapTonToEth",receiver:r,amount:o.toString(),tx:{address_:{workchain:i.wc,address_hash:"0x"+tt().utils.bytesToHex(i.hashPart)},tx_hash:"0x"+tt().utils.bytesToHex(tt().utils.base64ToBytes(t.transaction_id.hash)),lt:t.transaction_id.lt},time:Number(t.utime)}:(Te.error("amount from in_msg doesnt match ",o.toString(),d.toString(),l.toString()),null)}));const Se=tt().utils.BN,Ae=202,Ie="0xca3369c6",_e=["uint256","uint8"];class Be{static getDataId(t,e,n,r){return ee(t.eth.abi.encodeParameters(["int","address","uint256","address","address","uint256","bytes32","bytes32","uint64"],[55930,n,r,e.ethReceiver,e.token,e.jettonAmount,e.tx.address_.address_hash,e.tx.tx_hash,e.tx.lt]))}static getNewSetId(t,e,n,r,s){return ee(t.eth.abi.encodeParameters(["int","address","uint256","int","address[]"],[1511,r,s,e,n]))}static getNewLockStatusId(t,e,n,r,s){return ee(t.eth.abi.encodeParameters(["int","address","uint256","bool","int"],[45074,r,s,e,n]))}static createMultisigMsgBody(t,e,n){const r=new(tt().boc.Cell);r.bits.writeUint(4,32),r.bits.writeUint(e,64),r.bits.writeUint(0,8),r.bits.writeUint(new(tt().utils.BN)(t.transactionHash.slice(2),16),256),r.bits.writeInt(t.logIndex,16),r.bits.writeUint(new(tt().utils.BN)(t.to_address_hash,16),256),r.bits.writeCoins(new(tt().utils.BN)(t.amount)),r.bits.writeCoins(new(tt().utils.BN)(0));const s=new(tt().boc.Cell);return s.bits.writeUint(n,32),s.bits.writeUint(new(tt().utils.BN)(t.token.slice(2),16),160),s.bits.writeUint(t.decimals,8),r.refs.push(s),r}}(0,se.Z)(Be,"findLog",((t,e,n,r,s,o)=>{let i=0,a=null;for(const l of o)if(4===l.topics.length&&l.topics[1].toLowerCase().endsWith(e.substr(2))&&l.topics[2].toLowerCase().endsWith(s.substr(2))&&l.topics[3]==="0x"+r){const e=t.eth.abi.decodeParameters(_e,l.data);e[0]===n&&(a=l,i++)}if(i>1)throw new Error("too many logs");return a})),(0,se.Z)(Be,"isValidLock",((t,e)=>t.to.toLowerCase()===e.toLowerCase()&&(t.from.toLowerCase()!==e.toLowerCase()&&("0"===t.isError&&("1"===t.txreceipt_status&&(!!t.input&&(t.input.length===Ae&&(!!t.input.startsWith(Ie)&&!(t.confirmations<de))))))))),(0,se.Z)(Be,"processEvmTransaction",(async(t,e,n,r,s)=>{const o=me(n,"blockNumber"),i=ue(n,"hash"),a=me(n,"timeStamp"),l=pe(n,"blockHash"),d=me(n,"transactionIndex"),c=he(n,"from"),u=(he(n,"to"),n.input);if(u.length!==Ae)throw new Error("invalid input length "+u);if(!u.startsWith(Ie))throw new Error(`input ${Ie} `+u);const p=["address","uint256","bytes32"],h="0x"+u.slice(10),m=t.eth.abi.decodeParameters(p,h),y=he(m,"0"),g=be(m,"1"),w=ye(m,"2");if(!r||0===Object.keys(r).length)throw new Error("no receipt");if(l!==r.blockHash.toLowerCase())throw new Error("invalid blockHash");if(o!==r.blockNumber)throw new Error("invalid blockNumber");if(c!==r.from.toLowerCase())throw new Error("invalid from");if(!r.status)throw new Error("invalid status");if(e.toLowerCase()!==r.to.toLowerCase())throw new Error("invalid to");if(i!==r.transactionHash.toLowerCase())throw new Error("invalid transactionHash");if(d!==r.transactionIndex)throw new Error("invalid transactionIndex");const b=Be.findLog(t,c,g,w,y,r.logs);if(!b)throw new Error("cant find log");const T=me(b,"logIndex");if(s-r.blockNumber<de)throw new Error("No block confirmations "+(s-r.blockNumber)+"("+s+"-"+r.blockNumber+")");const f=t.eth.abi.decodeParameters(_e,b.data),v=we(f,1);return{type:"Lock",transactionHash:i,logIndex:T,blockNumber:o,blockTime:a,blockHash:l,from:c,token:y,to_address_hash:w,amount:g,decimals:v,rawData:b.data,topics:b.topics,transactionIndex:d}})),(0,se.Z)(Be,"processTonTransaction",(t=>{const e=Jt(t.out_msgs);if(!e)return null;const n=Qt(e);if(null===n)return null;const r=Zt("0x"+tt().utils.bytesToHex(n.slice(0,20))),s=tt().utils.bytesToHex(n.slice(20,36)),o=new Se(s,16),i=Zt("0x"+tt().utils.bytesToHex(n.slice(36,56))),a=tt().utils.bytesToHex(n.slice(56,88));new(tt().utils.Address)(t.in_msg.source);return{type:"Burn",ethReceiver:r,token:i,jettonAmount:o.toString(),tx:{address_:{workchain:0,address_hash:"0x"+a},tx_hash:"0x"+tt().utils.bytesToHex(tt().utils.base64ToBytes(t.transaction_id.hash)),lt:t.transaction_id.lt},time:Number(t.utime)}})),(0,se.Z)(Be,"processPayJettonMintTransaction",(t=>{const e=Jt(t.out_msgs);if(!e)return null;const n=Qt(e);if(null===n)return null;const r=tt().utils.bytesToHex(n.slice(0,8)),s=new Se(r,16),o=new(tt().utils.Address)(t.in_msg.source);return{type:"PayJettonMint",queryId:s.toString(),tx:{address_:{workchain:o.wc,address_hash:"0x"+tt().utils.bytesToHex(o.hashPart)},tx_hash:"0x"+tt().utils.bytesToHex(tt().utils.base64ToBytes(t.transaction_id.hash)),lt:t.transaction_id.lt},time:Number(t.utime)}}));var ze=n(15941);async function Fe(t,e,n,r){ze.log("getVotesInMultisig ",n);const s=await t.provider.call(e,"get_query_state",[["num",n]]),o=Ut(s.stack[0]),i=Ut(s.stack[1]),a=[],l=-1===o?r:i.toString(2).split("0").join("").length;for(let d=0;d<l;d++)a.push(1);return a}var Ne=n(15941);const Pe=tt().utils.fromNano;var xe=(0,o.aZ)({props:{isTestnet:{type:Boolean,required:!0},isRecover:{type:Boolean,required:!0},lt:{type:Number,required:!0},hash:{type:String,required:!0},isFromTon:{type:Boolean,required:!0},pair:{type:String,required:!0},tokenAddress:{type:String,required:!0},tokenSymbol:{type:String,required:!0},amount:{type:Object,required:!0},token:{type:String,required:!0},toAddress:{type:String,required:!0},provider:{type:Object,required:!0},isInputsValid:{type:Boolean,required:!0}},data(){return{updateStateIntervalForTon:null,updateStateIntervalForJettons:null,providerDataForTon:null,providerDataForJettons:null,ethToTon:null,isInitInProgress:!1,isMintingInProgress:!1,isApprovingInProgress:!1,isBurningInProgress:!1,isLockingInProgress:!1,isQRCodeShown:!1,hasApprove:!1,state:{swapId:"",queryId:"0",jettonEvmAddress:"",fromCurrencySent:!1,toCurrencySent:!1,step:0,votes:null,swapData:null,burnData:null,createTime:0,blockNumber:0}}},computed:{netTypeName(){return this.isTestnet?"test":"main"},params(){const t=Ht.z.networks[this.pair];return t[this.netTypeName]},isGetTonCoinVisible(){return"ton"===this.token?this.isFromTon&&!this.state.toCurrencySent&&4===this.state.step:this.isFromTon?!this.state.toCurrencySent&&4===this.state.step:3==this.state.step},isDoneVisible(){return this.state.step>4},isCancelVisible(){return this.isFromTon&&1===this.state.step},fromCoin(){return this.isFromTon?this.$t(`networks.ton.${this.netTypeName}.coinShort`):this.$t(`networks.${this.pair}.${this.netTypeName}.coinShort`)},toCoin(){return"ton"===this.token?this.isFromTon?this.$t(`networks.${this.pair}.${this.netTypeName}.coinShort`):this.$t(`networks.ton.${this.netTypeName}.coinShort`):this.tokenSymbol},getStepInfoText1(){if(1===this.state.step){if(this.isFromTon){if("ton"===this.token){const t=Ht.z.tonTransferUrl.replace("<BRIDGE_ADDRESS>",this.params.tonBridgeAddress).replace("<AMOUNT>",this.amount.toString()).replace("<TO_ADDRESS>",this.toAddress);return{isOnlyText:!1,send1:this.$t("networks.ton.transactionSend1"),amountReadable:Pe(this.amount),send2:this.$t("networks.ton.transactionSend2"),toAddress:this.params.tonBridgeAddress,withComment:this.$t("networks.ton.transactionSendComment"),comment:"swapTo#"+this.toAddress,openWalletLabel:this.$t("networks.ton.openWallet"),openWalletUrl:t,generateQRCode:this.isQRCodeShown?"":this.$t("networks.ton.generateQRCode"),scanQRCode:this.isQRCodeShown?this.$t("networks.ton.scanQRCode"):""}}return{}}return{isOnlyText:!0,text:this.state.fromCurrencySent?this.$t(`networks.${this.pair}.transactionWait`):this.$t(`networks.${this.pair}.transactionSend`,{provider:this.provider.title})}}{const t=this.isFromTon?"ton":this.pair;return{isOnlyText:!0,text:this.$t(`networks.${t}.transactionCompleted`)}}},getStepInfoText2(){if(this.isFromTon)return"";const t="ton"===this.token?this.providerDataForTon:this.providerDataForJettons;if(2===this.state.step){let e=(t?.blockNumber||this.state.blockNumber)-this.state.blockNumber;return e=Math.max(Math.min(e,this.params.blocksConfirmations),0),this.$t(`networks.${this.pair}.blocksConfirmations`,{count:String(e)+"/"+String(this.params.blocksConfirmations)})}return this.state.step>2?this.$t("blocksConfirmationsCollected"):this.$t("blocksConfirmationsWaiting")},getStepInfoText3(){return"ton"===this.token||this.isFromTon?this.getOraclesText(3):this.getGetCoinsText(3)},getStepInfoText4(){return"ton"===this.token||this.isFromTon?this.getGetCoinsText(4):this.getOraclesText(4)}},watch:{"state.step":{immediate:!0,handler(t){this.$emit("state-changed"),this.$emit("transfer-in-progress",t>0)}},token:{immediate:!0,handler(t){this.onTokenChange(t)}}},mounted(){this.$watch((()=>[this.amount]),(0,Et.debounce)((async([t])=>{this.checkApprove(t)}),300)),this.$emit("ready")},beforeDestroy(){clearInterval(this.updateStateIntervalForTon),clearInterval(this.updateStateIntervalForJettons)},methods:{onCopyClick:Rt,makeAddress:Zt,parseEvmSignature:Yt,getQueryId:re,...(0,c.OI)({setAlert:"setAlert"}),async mint(){if(this.isFromTon)"ton"===this.token?await this.mintForTon():await this.unlockForJettons();else{if("ton"===this.token)throw new Error("can never happen");await this.mintJetton()}},onTokenChange(t){clearInterval(this.updateStateIntervalForTon),clearInterval(this.updateStateIntervalForJettons),"ton"===t?(this.updateStateForTon(),this.updateStateIntervalForTon=setInterval(this.updateStateForTon,5e3)):(this.updateStateForJettons(),this.updateStateIntervalForJettons=setInterval(this.updateStateForJettons,5e3))},async checkApprove(t){if(!this.isFromTon&&"ton"!==this.token&&this.tokenAddress){Ne.log("checkApprove");const e=new le(this.provider);if(rt().utils.isAddress(this.tokenAddress)){const n=await e.allowance({address:this.tokenAddress,spender:this.params.tonBridgeV2EVMAddress,owner:this.provider.myAddress});t.gt(new(Z())(n.toString()))?this.hasApprove=!1:(this.hasApprove=!0,Ne.log("this.hasApprove",this.hasApprove))}else this.hasApprove=!1}},async approve(){this.isApprovingInProgress=!0;const t=new le(this.provider),e=Pt.PS.toString();try{const n=await t.approve({address:this.tokenAddress,spender:this.params.tonBridgeV2EVMAddress,amount:e});await n.wait(),this.hasApprove=!0,this.isApprovingInProgress=!1}catch(n){Ne.error(n),this.isApprovingInProgress=!1,this.setAlert({title:this.$t("errors.alertTitleError"),message:n.message,buttonLabel:this.$t("errors.alertButtonClose")})}},getOraclesText(t){if(this.state.step===t){const t="ton"===this.token?this.providerDataForTon:this.providerDataForJettons,e=(this.state.votes?.length||0)+"/"+(t?.oraclesTotal||0);return this.$t("oraclesConfirmations",{count:String(e)})}return this.state.step>t?this.$t("oraclesConfirmationsCollected"):this.$t("oraclesConfirmationsWaiting")},getGetCoinsText(t){if(this.state.step===t)return this.state.toCurrencySent?this.$t(`networks.${this.pair}.transactionWait`):this.$t("getCoinsByProvider",{provider:"ton"===this.token?this.provider.title:"TON Wallet",toCoin:this.toCoin});if(this.state.step>t)return this.$t("coinsSent",{toCoin:this.toCoin});{const t=this.isFromTon?this.pair:"ton";return this.$t("getCoins",{toCoin:this.toCoin,toNetwork:this.$t(`networks.${t}.${this.netTypeName}.name`)})}},generateQRCode(){this.isQRCodeShown=!0;const t=Ht.z.tonTransferUrl.replace("<BRIDGE_ADDRESS>",this.params.tonBridgeAddress).replace("<AMOUNT>",this.amount.toString()).replace("<TO_ADDRESS>",this.toAddress),e={data:t,width:225*window.devicePixelRatio,height:225*window.devicePixelRatio,image:n(71793),dotsOptions:{color:"#000000",type:"extra-rounded"},cornersSquareOptions:{color:"#000000",type:"extra-rounded"},cornersDotOptions:{color:"#000000",type:"dot"},imageOptions:{hideBackgroundDots:!0,crossOrigin:"use-credentials",imageSize:1},qrOptions:{errorCorrectionLevel:"L"}},r=new($t())(e);r.append(this.$refs.qrcode)},resetState(){this.state.swapId="",this.state.queryId="0",this.state.jettonEvmAddress="",this.state.fromCurrencySent=!1,this.state.toCurrencySent=!1,this.state.step=0,this.state.votes=null,this.state.swapData=null,this.state.burnData=null,this.state.createTime=0,this.state.blockNumber=0,this.isQRCodeShown=!1,this.$emit("reset-state")},async loadState({processingState:t}){return!!t&&(this.isInitInProgress=!0,"ton"!==t.token||this.providerDataForTon?this.providerDataForJettons||(this.providerDataForJettons=await this.initProviderForJettons()):this.providerDataForTon=await this.initProviderForTON(),this.isInitInProgress=!1,!(!this.providerDataForTon&&!this.providerDataForJettons)&&(Object.assign(this.state,t),this.ethToTon=t.ethToTon,"ton"===t.token?this.updateStateForTon():this.updateStateForJettons(),!0))},saveState(){this.$emit("save-state",{...this.state,isFromTon:this.isFromTon,token:this.token,tokenAddress:this.tokenAddress,ethToTon:this.ethToTon})},deleteState(){this.$emit("delete-state")},async updateStateForTon(){if(1===this.state.step&&this.isFromTon){const t=await this.getSwapForTON(this.amount,this.toAddress,this.state.createTime);t&&(this.state.swapId=this.getSwapTonToEthIdForTon(t),this.state.swapData=t,this.state.step=3)}if(2===this.state.step&&!this.isFromTon){const t=await this.provider.web3.eth.getBlockNumber();this.providerDataForTon.blockNumber=t,Ne.log(this.providerDataForTon?.blockNumber,this.state.blockNumber);const e=(this.providerDataForTon?.blockNumber||this.state.blockNumber)-this.state.blockNumber;if(e>this.params.blocksConfirmations){const t=await this.provider.web3.eth.getTransactionReceipt(this.ethToTon.transactionHash);this.ethToTon.blockNumber=t.blockNumber;const e=await this.provider.web3.eth.getBlock(t.blockNumber);this.ethToTon.blockTime=Number(e.timestamp),this.ethToTon.blockHash=e.hash;const n=Ce.findLog(this.provider.web3,this.ethToTon.from,this.ethToTon.value,this.ethToTon.to.workchain.toString(),this.ethToTon.to.address_hash,t.logs);if(!n)throw new Error("cant find log");this.ethToTon.logIndex=n.logIndex,this.state.queryId=this.getQueryId(this.ethToTon).toString(),this.state.step=3}}3===this.state.step&&(this.state.votes=this.isFromTon?await this.getEthVoteForTON(this.state.swapId):await this.getTonVoteForTON(this.state.queryId),this.state.votes&&this.state.votes.length>=2*this.providerDataForTon.oraclesTotal/3&&(this.state.step=this.isFromTon?4:5,this.isFromTon&&this.$emit("ready-to-mint")))},async updateStateForJettons(){if(1===this.state.step&&this.isFromTon&&await this.getSwapForJettons(this.toAddress,this.state.createTime),2===this.state.step&&!this.isFromTon){const t=await this.provider.web3.eth.getBlockNumber();this.providerDataForJettons.blockNumber=t,Ne.log(this.providerDataForJettons?.blockNumber,this.state.blockNumber);const e=(this.providerDataForJettons?.blockNumber||this.state.blockNumber)-this.state.blockNumber;if(e>this.params.blocksConfirmations){const t=await this.provider.web3.eth.getTransactionReceipt(this.ethToTon.transactionHash);this.ethToTon.blockNumber=t.blockNumber;const e=await this.provider.web3.eth.getBlock(t.blockNumber);this.ethToTon.blockTime=Number(e.timestamp),this.ethToTon.blockHash=e.hash;const n=Be.findLog(this.provider.web3,this.ethToTon.from,this.ethToTon.value,this.ethToTon.to.address_hash,this.tokenAddress.toLowerCase(),t.logs);if(!n)throw new Error("cant find log");this.ethToTon.logIndex=n.logIndex,this.state.queryId=this.getQueryId(this.ethToTon).toString(),this.state.step=3}}if(3===this.state.step)if("ton"===this.token||this.isFromTon)this.state.votes=this.isFromTon?await this.getEthVoteForJettons(this.state.swapId):await this.getTonVoteForJettons(this.state.queryId),this.state.votes&&this.state.votes.length>=2*this.providerDataForJettons.oraclesTotal/3&&(this.state.step=4,this.$emit("ready-to-mint"));else{const t=await this.isJettonMintPaid(this.state.queryId);Ne.log("isPaid",this.state.queryId,t),t&&(this.state.step=4)}4===this.state.step&&("ton"===this.token||this.isFromTon||(this.state.votes=await this.getTonVoteForJettons(this.state.queryId),this.state.votes&&this.state.votes.length>=2*this.providerDataForJettons.oraclesTotal/3&&(this.state.step=5)))},getSwapTonToEthIdForTon(t){const e="eth"!==this.pair||this.isTestnet?this.params.wTonAddress:void 0;return Ce.getDataId(this.provider.web3,t,e)},getSwapTonToEthIdForJettons(t){return Be.getDataId(this.provider.web3,t,this.params.tonBridgeV2EVMAddress,this.params.chainId)},getFeeAmountForTon(t){const e=t.sub(this.providerDataForTon.feeFlat),n=e.mul(this.providerDataForTon.feeFactor).div(this.providerDataForTon.feeBase);return this.providerDataForTon.feeFlat.add(n)},async getSwapForTON(t,e,n){Ne.log("getTransactions",this.params.tonBridgeAddress,this.lt&&this.hash?1:this.isRecover?200:40,this.lt||void 0,this.hash||void 0,void 0,!(!this.lt||!this.hash)||void 0);const r=await this.providerDataForTon.tonweb.provider.getTransactions(this.params.tonBridgeAddress,this.lt&&this.hash?1:this.isRecover?200:40,this.lt||void 0,this.hash||void 0,void 0,!(!this.lt||!this.hash)||void 0);Ne.log("ton txs",r.length);for(const s of r){if(!this.isRecover&&(!this.lt||!this.hash)&&1e3*s.utime<n)continue;const r=Ce.processTonTransaction(s);if(r){Ne.log(JSON.stringify(r));const n=t.sub(this.getFeeAmountForTon(t));if(new(Z())(r.amount).eq(n)&&r.receiver.toLowerCase()===e.toLowerCase())return r}}return null},async isJettonMintPaid(t){const e=await this.providerDataForJettons.tonweb.provider.getTransactions(this.params.tonBridgeAddressV2,40);Ne.log("ton txs",e.length);for(const n of e){const e=Be.processPayJettonMintTransaction(n);if(Ne.log(e),e&&e.queryId===t)return!0}return!1},async getSwapForJettons(t,e){Ne.log("getTransactions",this.params.tonBridgeAddressV2,this.lt&&this.hash?1:this.isRecover?200:40,this.lt||void 0,this.hash||void 0,void 0,!(!this.lt||!this.hash)||void 0);const n=await this.providerDataForJettons.tonweb.provider.getTransactions(this.params.tonBridgeAddressV2,this.lt&&this.hash?1:this.isRecover?200:40,this.lt||void 0,this.hash||void 0,void 0,!(!this.lt||!this.hash)||void 0);Ne.log("ton txs",n.length);for(const s of n){if(!this.isRecover&&(!this.lt||!this.hash)&&1e3*s.utime<e)continue;const n=Be.processTonTransaction(s);if(n&&(Ne.log(JSON.stringify(n)),n.ethReceiver.toLowerCase()===t.toLowerCase()&&this.state.jettonEvmAddress.toLocaleLowerCase()===n.token.toLocaleLowerCase())){if(n){const t=this.getSwapTonToEthIdForJettons(n);let e=!0;try{e=await this.providerDataForJettons.bridgeContract.methods.finishedVotings(t).call()}catch(r){return Ne.error(r),null}e||(this.state.swapId=this.getSwapTonToEthIdForJettons(n),this.state.burnData=n,this.state.step=3)}return null}}return null},async getEthVoteForTON(t){const e=await te(this.providerDataForTon.tonweb,this.params.tonCollectorAddress,t);return e?e.signatures:null},async getEthVoteForJettons(t){const e=await te(this.providerDataForJettons.tonweb,this.params.tonCollectorAddressV2,t);return e?e.signatures:null},async getTonVoteForTON(t){return Fe(this.providerDataForTon.tonweb,this.params.tonMultisigAddress,t,this.providerDataForTon.oraclesTotal)},async getTonVoteForJettons(t){return Fe(this.providerDataForJettons.tonweb,this.params.tonMultisigAddressV2,t,this.providerDataForJettons.oraclesTotal)},onDoneClick(){this.deleteState(),this.resetState()},onCancelClick(){this.deleteState(),this.resetState()},async checkProviderIsReady(){try{if(!this.provider.isConnected){const t=this.$t("errors.providerIsDisconnected",{provider:this.provider.title});throw new Error(t)}if(!this.provider.myAddress)throw new Error(this.$t("errors.cantGetAddress"));if(this.provider.chainId!==this.params.chainId){const t=this.$t("errors.wrongProviderNetwork",{network:this.$t(`networks.${this.pair}.${this.netTypeName}.name`),provider:this.provider.title});throw new Error(t)}if(!new(Z())(await this.provider.web3.eth.getBalance(this.provider.myAddress)).gt(new(Z())("0")))throw new Error(this.$t(`networks.${this.pair}.errors.lowBalance`))}catch(t){return Ne.error(t.message),this.setAlert({title:this.$t("errors.alertTitleError"),message:t.message,buttonLabel:this.$t("errors.alertButtonClose")}),!1}return!0},async mintForTon(){if(this.isMintingInProgress)return;const t=await this.checkProviderIsReady();if(!t)return void this.$emit("mint-failed");let e;this.isMintingInProgress=!0;try{let t=this.state.votes.map((t=>({signer:t.publicKey,signature:Dt.gV({r:t.r,s:t.s,v:t.v})})));t=t.sort(((t,e)=>new(Z())(t.signer.substr(2),16).cmp(new(Z())(e.signer.substr(2),16)))),e=await this.providerDataForTon.wtonContract.methods.voteForMinting(this.state.swapData,t).send({from:this.provider.myAddress}).on("transactionHash",(()=>{this.state.toCurrencySent=!0,this.isMintingInProgress=!1,this.deleteState()}))}catch(n){return Ne.error(n),this.$emit("mint-failed"),void(this.isMintingInProgress=!1)}this.isMintingInProgress=!1,e.status?(this.state.step=5,this.deleteState(),this.$emit("minted-successfully")):(Ne.error("transaction fail",e),this.$emit("mint-failed"))},async unlockForJettons(){if(this.isMintingInProgress)return;const t=await this.checkProviderIsReady();if(!t)return void this.$emit("mint-failed");let e,n=this.state.votes.map((t=>({signer:t.publicKey,signature:Dt.gV({r:t.r,s:t.s,v:t.v})})));n=n.sort(((t,e)=>new(Z())(t.signer.substr(2),16).cmp(new(Z())(e.signer.substr(2),16)))),this.isMintingInProgress=!0;try{if(!this.state.burnData)return;const t=new ie(this.provider);e=await t.unlock({bridgeAddress:this.params.tonBridgeV2EVMAddress,signatures:n,...this.state.burnData}),e=await e.wait(),this.state.fromCurrencySent=!0,this.isMintingInProgress=!1,e.status?(this.state.step=5,this.deleteState(),this.$emit("minted-successfully"),this.isMintingInProgress=!1):(Ne.error("transaction fail",e),this.$emit("mint-failed"),this.isMintingInProgress=!1)}catch(r){this.isMintingInProgress=!1,Ne.error(r)}},async burnForTON(){const t=await this.checkProviderIsReady();if(!t)return;this.isBurningInProgress=!0;const e=this.provider.myAddress,n=this.toAddress,r=new(tt().utils.Address)(n),s=r.wc,o=tt().utils.bytesToHex(r.hashPart);let i;try{i=await this.providerDataForTon.wtonContract.methods.burn(this.amount,{workchain:s,address_hash:"0x"+o}).send({from:e}).on("transactionHash",(()=>{this.state.fromCurrencySent=!0}))}catch(a){return this.isBurningInProgress=!1,Ne.error(a),void this.resetState()}i.status?(Ne.log("receipt",i),this.state.blockNumber=i.blockNumber,this.ethToTon={type:"SwapEthToTon",transactionHash:i.transactionHash,logIndex:i.events.SwapEthToTon.logIndex,blockNumber:i.blockNumber,blockTime:0,blockHash:"",from:e,to:{workchain:s,address_hash:o},value:this.amount.toString(),rawData:i.rawData,topics:i.topics,transactionIndex:i.transactionIndex},this.isBurningInProgress=!1,this.state.step=2):(this.isBurningInProgress=!1,Ne.error("transaction fail",i))},async lockToken(){const t=await this.checkProviderIsReady();if(!t)return;this.isBurningInProgress=!0;const e=this.provider.myAddress,n=this.toAddress,r=new(tt().utils.Address)(n),s=r.wc;if(0!==s)throw new Error("Only basechain wallets supported");const o=tt().utils.bytesToHex(r.hashPart);let i,a;try{const t=new le(this.provider),e=await t.decimals({address:this.tokenAddress});a=(0,xt.vz)(this.amount.toString(),e).toString();const n=new ie(this.provider);i=await n.lock({address:this.params.tonBridgeV2EVMAddress,token:this.tokenAddress,amount:a,to_address_hash:"0x"+o}),i=await i.wait(),this.state.fromCurrencySent=!0}catch(l){return this.isBurningInProgress=!1,Ne.error(l),void this.resetState()}if(i.status){this.isBurningInProgress=!1,Ne.log("receipt",i),this.state.blockNumber=i.blockNumber;const t=i?.events?.find((t=>"Lock"===t.event))?.logIndex;this.ethToTon={type:"SwapEthToTon",transactionHash:i.transactionHash,logIndex:t,blockNumber:i.blockNumber,blockTime:0,blockHash:"",from:e,to:{workchain:s,address_hash:o},value:a,rawData:i.rawData,topics:i.topics,transactionIndex:i.transactionIndex},this.state.step=2}else Ne.error("transaction fail",i)},async burnJetton(){if(this.providerDataForJettons)try{this.isBurningInProgress=!0;const t=await this.providerDataForJettons.tonwebWallet.provider.send("ton_requestWallets",[]),e=t[0],n=new(tt().Address)(e.address);if(0!==n.wc)throw new Error("Only basechain wallets supported");const r=this.tokenAddress,s=await lt({tonweb:this.providerDataForJettons.tonweb,userTonAddress:n,tokenAddress:r}),o=new(tt().utils.BN)(this.provider.myAddress.slice(2),16),{decimals:i,tokenAddress:a}=await at(this.providerDataForJettons.tonweb,this.tokenAddress),{balance:l}=await it(this.providerDataForJettons.tonweb,s.toString(!0,!0,!0)),d=new(Z())((0,xt.vz)(this.amount.toString(),i).toString());if(!l.gte(d))return this.$emit("error",{input:"amount",message:this.$t("errors.toncoinBalance",{coin:this.tokenSymbol,balance:(+(0,xt.bM)(l.toString(),i)).toFixed(0)})}),void(this.isBurningInProgress=!1);this.state.jettonEvmAddress=a,this.state.step=1,await Vt({tonwebWallet:this.providerDataForJettons.tonwebWallet,destinationAddress:o,userTonAddress:n,jettonWalletAddress:s,jettonAmountWithDecimals:d}),this.isBurningInProgress=!1}catch(t){this.isBurningInProgress=!1,Ne.error(t),this.resetState()}},async mintJetton(){if(this.providerDataForJettons)try{this.isBurningInProgress=!0;const t=await this.providerDataForJettons.tonwebWallet.provider.send("ton_requestWallets",[]),e=t[0],n=new(tt().Address)(e.address);if(0!==n.wc)throw new Error("Only basechain wallets supported");await Wt({tonwebWallet:this.providerDataForJettons.tonwebWallet,queryId:this.state.queryId,bridgeTonAddress:this.params.tonBridgeAddressV2}),this.isBurningInProgress=!1}catch(t){this.isBurningInProgress=!1,Ne.error(t),this.resetState()}},async initProviderForTON(){const t=await this.checkProviderIsReady();if(!t)return null;const e=new this.provider.web3.eth.Contract(Mt,this.params.wTonAddress),n=(await e.methods.getFullOracleSet().call()).length;if(!(n>0))return null;const r=new(tt())(new(tt().HttpProvider)(this.params.tonCenterUrl,{apiKey:this.params.tonCenterApiKey})),s=(await r.provider.call(this.params.tonBridgeAddress,"get_bridge_data",[])).stack;if(8!==s.length)return Ne.error("Invalid bridge data",s),null;const o=new(Z())(s[4][1].slice(2),16),i=new(Z())(s[5][1].slice(2),16),a=new(Z())(s[6][1].slice(2),16),l=new(Z())(s[7][1].slice(2),16),d={blockNumber:0,wtonContract:e,tonweb:r,oraclesTotal:n,feeFlat:o.add(i),feeFactor:a,feeBase:l};return d},async initProviderForJettons(){const t=await this.checkProviderIsReady();if(!t)return null;const e=window.ton;if(!e.isTonWallet)return Ne.error("isTonWallet=",e.isTonWallet),null;const n=new(tt())(e),r=new this.provider.web3.eth.Contract(Lt.Mt,this.params.tonBridgeV2EVMAddress),s=(await r.methods.getFullOracleSet().call()).length;if(!(s>0))return null;const o=new(tt())(new(tt().HttpProvider)(this.params.tonCenterUrl,{apiKey:this.params.tonCenterApiKey})),i={blockNumber:0,bridgeContract:r,tonweb:o,tonwebWallet:n,oraclesTotal:s};return i},async onTransferClick(){if(!this.isInitInProgress)if(this.isInitInProgress=!0,this.isInputsValid)if("ton"!==this.token||this.providerDataForTon?this.providerDataForJettons||(this.providerDataForJettons=await this.initProviderForJettons()):this.providerDataForTon=await this.initProviderForTON(),this.providerDataForTon||this.providerDataForJettons){if("ton"===this.token&&this.providerDataForTon){if(!this.isFromTon){const t=new(Z())(await this.providerDataForTon.wtonContract.methods.balanceOf(this.provider.myAddress).call());if(this.amount.gt(t))return this.$emit("error",{input:"amount",message:this.$t("errors.toncoinBalance",{coin:"TONCOIN",balance:Pe(t).toString()})}),void(this.isInitInProgress=!1)}this.isInitInProgress=!1,this.state.createTime=Date.now(),this.state.step=1,this.isFromTon?this.saveState():await this.burnForTON()}else if(this.providerDataForJettons)if(this.isInitInProgress=!1,this.isFromTon)this.isInitInProgress=!1,await this.burnJetton();else{this.isLockingInProgress=!0;const t=new le(this.provider),e=await t.decimals({address:this.tokenAddress}),n=new(Z())((await t.balanceOf({address:this.tokenAddress,account:this.provider.myAddress})).toString()),r=new(Z())((0,xt.vz)(this.amount.toString(),e).toString());if(!n.gte(r))return this.$emit("error",{input:"amount",message:this.$t("errors.toncoinBalance",{coin:this.tokenSymbol,balance:(+(0,xt.bM)(n.toString(),e)).toFixed(0)})}),void(this.isLockingInProgress=!1);await this.lockToken(),this.isLockingInProgress=!1,this.saveState()}}else this.isInitInProgress=!1;else this.isInitInProgress=!1}}});const De=(0,g.Z)(xe,[["render",Nt],["__scopeId","data-v-62be8e14"]]);var Ee=De;const Oe=["disabled","readonly","type","id","inputmode"],$e={class:"CustomInput-labelWrapper"},Le=["for"],Me={key:0,class:"CustomInput-arrow"},Ve={key:1,class:"CustomInput-dropdown"},We=["onClick"];function Re(t,e,n,s,i,a){return(0,o.wg)(),(0,o.iD)("div",{class:(0,u.C_)(["CustomInput",{hasData:t.hasData,disabled:t.disabled,error:!!t.error&&t.hasData,isDropdownOpened:t.isDropdownOpened}])},[(0,o.wy)((0,o._)("input",{disabled:t.disabled,readonly:t.hasDropdown,type:t.type,id:"CustomInput-"+t.$uuid.v1(),inputmode:"number"===t.type?"decimal":"text",onInput:e[0]||(e[0]=e=>t.$emit("changed")),onClick:e[1]||(e[1]=e=>t.isDropdownOpened=!0),onFocus:e[2]||(e[2]=e=>t.isDropdownOpened=!0),onBlur:e[3]||(e[3]=e=>t.$emit("blur")),onFocusout:e[4]||(e[4]=(...e)=>t.onInputFocusOut&&t.onInputFocusOut(...e)),"onUpdate:modelValue":e[5]||(e[5]=e=>t.model=e)},null,40,Oe),[[r.YZ,t.model]]),(0,o._)("div",$e,[(0,o._)("label",{for:"CustomInput-"+t.$uuid.v1()},(0,u.zw)(t.hasData&&t.error||t.label),9,Le)]),t.hasDropdown?((0,o.wg)(),(0,o.iD)("div",Me)):(0,o.kq)("",!0),t.hasDropdown?((0,o.wg)(),(0,o.iD)("ul",Ve,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.dropdown,((e,n)=>((0,o.wg)(),(0,o.iD)("li",{key:n},[(0,o._)("button",{onClick:n=>t.onOptionClick(e.value)},(0,u.zw)(e.label),9,We)])))),128))])):(0,o.kq)("",!0)],2)}var He=(0,o.aZ)({props:{disabled:{type:Boolean,default:!1},error:{type:String,default:""},label:{type:String,required:!0},type:{type:String,required:!0},modelValue:{type:String,required:!0},dropdown:{type:Array,default:()=>[]}},data(){return{isDropdownOpened:!1}},computed:{hasData(){return!!this.modelValue},model:{get(){if(this.hasDropdown){const t=this.dropdown.find((t=>t.value===this.modelValue));return t?.label||""}return this.modelValue},set(t){this.$emit("update:modelValue",t)}},hasDropdown(){return!!this.dropdown?.length}},methods:{onOptionClick(t){this.model=t,this.isDropdownOpened=!1},onInputFocusOut(t){if(!this.hasDropdown)return;let e=t.relatedTarget;for(;e&&e!==document;e=e.parentNode)if(e===this.$el)return;this.isDropdownOpened=!1}}});const qe=(0,g.Z)(He,[["render",Re],["__scopeId","data-v-78dd5646"]]);var Ue=qe;const Je={class:"Footer"},je={href:"https://github.com/ton-blockchain/token-bridge",target:"_blank"},Ge={href:"https://github.com/ton-blockchain/TIPs/issues/24",target:"_blank"};function Qe(t,e,n,r,s,i){return(0,o.wg)(),(0,o.iD)("footer",Je,[(0,o.Uk)(" v3.0.4, "),(0,o._)("a",je,(0,u.zw)(t.$t("sourceCode")),1),(0,o.Uk)(", "),(0,o._)("a",Ge,(0,u.zw)(t.$t("documentation")),1),(0,o.Uk)(". ")])}var Ze=(0,o.aZ)({});const Ke=(0,g.Z)(Ze,[["render",Qe],["__scopeId","data-v-48d90522"]]);var Xe=Ke;const Ye=t=>((0,o.dD)("data-v-5967577c"),t=t(),(0,o.Cn)(),t),tn={key:0,class:"Header-testnet"},en={class:"Header-wrapper"},nn=Ye((()=>(0,o._)("span",{class:"Header-logoIcon"},null,-1))),rn={class:"Header-logoLabel"},sn={class:"Header-menu"},on={key:0,class:"Header-menuWrapper"},an=["data-icon"],ln={class:"Header-menuList"},dn={"data-id":"address"},cn={"data-id":"disconnect"},un=["disabled"];function pn(t,e,n,r,s,i){return(0,o.wg)(),(0,o.iD)("header",{class:(0,u.C_)(["Header",{isScrolled:t.isScrolled}])},[t.isTestnet?((0,o.wg)(),(0,o.iD)("div",tn,(0,u.zw)(t.$t("testnetMessage")),1)):(0,o.kq)("",!0),(0,o._)("div",en,[((0,o.wg)(),(0,o.j4)((0,o.LL)(t.isHistoryShown?"NuxtLink":"div"),{to:t.parentUrl,class:(0,u.C_)(["Header-logo",{isHistoryShown:t.isHistoryShown}])},{default:(0,o.w5)((()=>[nn,(0,o._)("span",rn,(0,u.zw)(t.$t("logoLabel")),1)])),_:1},8,["to","class"])),(0,o._)("div",sn,[t.showMenu?((0,o.wg)(),(0,o.iD)("div",on,[(0,o._)("div",{class:"Header-menuAddress","data-icon":t.provider?.name},[(0,o._)("span",null,(0,u.zw)(t.address),1)],8,an),(0,o._)("ul",ln,[(0,o._)("li",dn,[(0,o._)("span",null,(0,u.zw)(t.address),1)]),(0,o._)("li",cn,[(0,o._)("button",{onClick:e[0]||(e[0]=(...e)=>t.onDisconnectClick&&t.onDisconnectClick(...e)),disabled:t.disableDisconnect},(0,u.zw)(t.$t("disconnectWallet")),9,un)])])])):(0,o.kq)("",!0)])])],2)}var hn=(0,o.aZ)({name:"Header",props:{isTestnet:{type:Boolean,default:!1},showMenu:{type:Boolean,required:!0},provider:{type:Object,required:!0},disableDisconnect:{type:Boolean,default:!1},isHistoryShown:{type:Boolean,default:!1}},data(){return{isScrolled:window.pageYOffset>0}},computed:{address(){return this.provider?this.provider.myAddress.slice(0,6)+"…"+this.provider.myAddress.slice(-4):""},parentUrl(){const{historyAddress:t,historyNetwork:e,...n}=this.$route.query;return this.generateUrlWithQuery(n)},historyUrl(){if(!this.provider||!this.provider.myAddress)return"";let t="";Object.keys(Ht.z.networks).forEach((e=>{const n=Ht.z.networks[e];Object.keys(n).forEach((r=>{const s=n[r];s.chainId===this.provider?.chainId&&(t=e)}))}));const e={...this.$route.query,historyAddress:this.provider.myAddress,historyNetwork:t};return this.generateUrlWithQuery(e)}},created(){window.addEventListener("scroll",this.onScroll)},beforeDestroy(){window.removeEventListener("scroll",this.onScroll)},methods:{generateUrlWithQuery(t){const e=Object.keys(t).map((e=>e+"="+encodeURIComponent(t[e])));return this.$router.resolve("/"+(e?"?"+e.join("&"):"")).href.replace("bridge","")},onScroll(){this.isScrolled=window.pageYOffset>0},close(){this.$emit("close")},onDisconnectClick(){this.provider?.disconnect()}}});const mn=(0,g.Z)(hn,[["render",pn],["__scopeId","data-v-5967577c"]]);var yn=mn;const gn=t=>((0,o.dD)("data-v-137f0b1b"),t=t(),(0,o.Cn)(),t),wn={class:"WalletsPopup-panel"},bn=["onClick"],Tn=["data-icon","disabled"],fn=gn((()=>(0,o._)("em",null,null,-1)));function vn(t,e,n,s,i,a){return(0,o.wg)(),(0,o.j4)(r.uT,{name:"WalletsPopupTransition",appear:""},{default:(0,o.w5)((()=>[(0,o._)("aside",{class:(0,u.C_)(["WalletsPopup",{isLoading:t.isLoading}])},[(0,o._)("div",{class:"WalletsPopup-overlay",onClick:e[0]||(e[0]=(...e)=>t.close&&t.close(...e))}),(0,o._)("div",wn,[(0,o._)("ul",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.providersList,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e,onClick:n=>t.onProviderClick(e)},[(0,o._)("button",{"data-icon":e,disabled:t.isLoading,class:(0,u.C_)({showLoader:t.isLoading&&t.loadingProviderName===e})},[(0,o.Uk)((0,u.zw)(t.$t(`providers.${e}`)),1),fn],10,Tn)],8,bn)))),128))]),t.uncancellable?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("button",{key:0,class:"WalletsPopup-panelClose",onClick:e[1]||(e[1]=(...e)=>t.close&&t.close(...e))}))])],2)])),_:1})}var kn=n(15941);const Cn={metamask:"Metamask"};var Sn=(0,o.aZ)({props:{params:{type:Object,required:!0},uncancellable:{type:Boolean,default:!1}},data(){return{isLoading:!1,loadingProviderName:""}},computed:{providersList(){return Object.keys(Cn)}},created(){document.addEventListener("keydown",this.onKeyDown)},beforeDestroy(){document.removeEventListener("keydown",this.onKeyDown)},methods:{onKeyDown(t){27===t.keyCode&&this.close()},close(){this.uncancellable||this.isLoading||this.$emit("cancel")},async onProviderClick(t){if(this.isLoading)return;this.isLoading=!0,this.loadingProviderName=t;const e=Cn[t],r=await n(38988)(`./${t}/index`);try{const t=new r[e],n=await t.connect({rpcEndpoint:this.params.rpcEndpoint,chainId:this.params.chainId});if(this.isLoading=!1,!n)return;this.$emit("wallet-connected",t)}catch(s){const t=this.$te(s.message)?this.$t(s.message):s.message;kn.error(t),alert(t),this.isLoading=!1}}}});const An=(0,g.Z)(Sn,[["render",vn],["__scopeId","data-v-137f0b1b"]]);var In=An,_n=n(47688),Bn=n(15941);const zn=["eth","bsc"],Fn=tt().utils.fromNano,Nn=tt().utils.toNano;var Pn=(0,o.aZ)({name:"Bridge",components:{BridgeProcessor:Ee,WalletsPopup:In,CustomInput:Ue,Header:yn,Footer:Xe},head(){return{title:this.$t(`networks.${this.pair}.pageTitle`)}},data(){return{getPairGasFee__debounced:()=>{},gasPrice:0,isTestnet:!1,isRecover:!1,lt:0,hash:"",isFromTon:!0,pair:"eth",token:"ton",amountInput:"",toAddress:"",tokenAddress:"",provider:null,tokenSymbol:"TON",isTransferInProgress:!1,isConnected:!1,walletsPopupState:"closed",bridgeProcessorIsLoading:!1,history:{address:"",network:"",isShown:!1},mainPageFixedPosition:0,errors:{amount:"",toAddress:"",tokenAddress:""}}},computed:{isInputsValid(){return!this.errors.amount&&!this.errors.toAddress},netTypeName(){return this.isTestnet?"test":"main"},params(){const t=Ht.z.networks[this.pair];return t[this.netTypeName]},pairNetworkCoinUrl(){const t=this.params.explorerUrl,e=this.params.wTonAddress;return t.replace("<ADDRESS>",e)},willReceive(){if(this.bridgeFeeAmount.isZero())return"";{const t=this.$t(`networks.${this.isFromTon?this.pair:"ton"}.${this.netTypeName}.coin`);return this.$t("willReceive",{coin:t,fee:Fn(this.amount.sub(this.bridgeFeeAmount))})}},pairFee(){const t=this.gasPrice?this.gasPrice/this.params.defaultGwei:1,e=this.isFromTon?this.params.coinsPerGweiTo*t:this.params.coinsPerGweiFrom*t;return this.$t(`networks.${this.pair}.gasFee`,{fee:e.toFixed(4)})},amount(){try{return"ton"===this.token?Nn(this.amountInput.toString()):new(Z())(this.amountInput.toString())}catch(t){return new(Z())(0)}},bridgeFeeAmount(){if(this.amount.lt(Nn("10")))return new(Z())(0);{const t=Nn("5"),e=this.amount.sub(t);return e.muln(2500).divn(1e6).add(t)}},bridgeFee(){return this.bridgeFeeAmount.isZero()?this.$t("bridgeFeeBelow10"):this.$t("bridgeFeeAbove10",{fee:Fn(this.bridgeFeeAmount)})},fromPairs(){return["ton",...zn]},toPairs(){return[this.pair,...zn.filter((t=>t!==this.pair)),"ton"]},isPairsBlocked(){return this.isTransferInProgress},isInputsBlocked(){return this.isTransferInProgress||!this.provider},contentStyle(){return this.history.isShown?{position:"fixed",top:-this.mainPageFixedPosition+"px"}:{}}},watch:{"$route.query":{immediate:!0,handler(t){t.historyAddress&&t.historyNetwork?(this.history.isShown=!0,this.history.address=t.historyAddress,this.history.network=t.historyNetwork):this.history.isShown=!1}},"history.isShown"(t){this.mainPageFixedPosition=t?window.pageYOffset:0},isFromTon(t,e){this.getPairGasFee__debounced(),t!==e&&this.checkInputs()},async pair(t,e){if(this.getPairGasFee__debounced(),t!==e&&this.checkInputs(),t!==e&&this.isConnected&&this.provider){const t=await this.provider.switchChain(this.params.chainId);t||(this.pair=e)}}},created(){if(this.getPairGasFee__debounced=X()(this.getPairGasFee,100),this.$route.query.testnet&&(this.isTestnet="true"===this.$route.query.testnet.toString().toLowerCase()),this.$route.query.recover||this.$route.query.recovery){const t="true"===(this.$route.query.recover?.toString()||"").toLowerCase(),e="true"===(this.$route.query.recovery?.toString()||"").toLowerCase();this.isRecover=t||e}if(this.$route.query.lt){const t=parseInt(this.$route.query.lt.toString(),10);this.lt=!t||isNaN(t)?0:t}if(this.$route.query.hash&&(this.hash=this.$route.query.hash.toString()),this.$route.query.amount)try{this.amountInput=Fn(this.$route.query.amount.toString())}catch(t){this.amountInput=""}if(this.$route.query.toAddress&&(this.toAddress=this.$route.query.toAddress.toString()),this.$route.query.fromNetwork&&this.$route.query.toNetwork){const t=this.$route.query.fromNetwork.toString().toLowerCase(),e=this.$route.query.toNetwork.toString().toLowerCase();"ton"===t&&zn.includes(e)&&(this.isFromTon=!0,this.pair=e),"ton"===e&&zn.includes(t)&&(this.isFromTon=!1,this.pair=t)}},mounted(){this.getPairGasFee__debounced(),this.loadStateBridge(),this.checkInputs(),this.$watch((()=>[this.tokenAddress,this.token,this.isFromTon]),X()((async([t,e])=>{if("ton"===e)this.tokenSymbol="TON";else if(this.tokenSymbol="",this.isFromTon){if(t&&tt().utils.Address.isValid(t))try{await at(new(tt())(new(tt().HttpProvider)(this.params.tonCenterUrl,{apiKey:this.params.tonCenterApiKey})),this.tokenAddress)}catch(n){Bn.error(n),this.tokenSymbol=""}}else if(t&&rt().utils.isAddress(t)&&this.provider)try{const e=new le(this.provider),n=await e.symbol(t);this.tokenSymbol=n}catch(n){this.tokenSymbol=""}else this.tokenSymbol=""}),300))},methods:{checkInputs(){if(this.errors.amount="",this.errors.toAddress="",this.errors.tokenAddress="",this.isFromTon?rt().utils.isAddress(this.toAddress)||(this.errors.toAddress=this.$t(`networks.${this.pair}.errors.invalidAddress`)):tt().utils.Address.isValid(this.toAddress)||(this.errors.toAddress=this.$t("networks.ton.errors.invalidAddress")),this.isFromTon?tt().utils.Address.isValid(this.tokenAddress)||(this.errors.tokenAddress=this.$t("networks.ton.errors.invalidAddress")):rt().utils.isAddress(this.tokenAddress)||(this.errors.tokenAddress=this.$t(`networks.${this.pair}.errors.invalidAddress`)),"ton"===this.token){this.amount.lt(Nn("10"))&&(this.errors.amount=this.$t("errors.amountBelow10"));try{Nn(this.amountInput.toString())}catch(t){this.errors.amount=this.$t("errors.notValidAmount")}this.toAddress.toLowerCase()!==this.params.wTonAddress.toLowerCase()&&this.toAddress.toLowerCase()!==this.params.tonBridgeAddress.toLowerCase()||(this.errors.toAddress=this.$t("errors.needPersonalAddress"))}},onPairClick(t,e){this.isPairsBlocked||(t&&(this.isFromTon=!this.isFromTon),this.pair=e)},resetState(){this.isRecover=!1,this.lt=0,this.hash="",this.tokenAddress="",this.amountInput="",this.toAddress=""},loadStateBridge(){if(!(0,_n.y1)())return;const t=localStorage.getItem("bridgeState");if(t){let n;try{n=JSON.parse(t)}catch(e){return}this.amountInput=n.amount,this.toAddress=n.toAddress,this.tokenAddress=n.tokenAddress,this.pair=n.pair,this.isFromTon=n.processingState.isFromTon,this.isTransferInProgress=!0}},loadStateProcessor(){if(!(0,_n.y1)())return;const t=localStorage.getItem("bridgeState");if(t){let n;try{n=JSON.parse(t)}catch(e){return}this.token=n.processingState.token,this.tokenAddress=n.processingState.tokenAddress,Bn.log("loadState"),this.$refs.bridgeProcessor.loadState(n)}},saveState(t){if(!(0,_n.y1)())return;const e={amount:this.amountInput,toAddress:this.toAddress,pair:this.pair,processingState:t};localStorage.setItem("bridgeState",JSON.stringify(e))},deleteState(){(0,_n.y1)()&&localStorage.removeItem("bridgeState")},onTransferInProgress(t){this.isTransferInProgress=t,this.checkInputs()},toggleFromTon(){this.isPairsBlocked||(this.isFromTon=!this.isFromTon)},async getPairGasFee(){let t,e=0;try{const e=await fetch(this.params.getGasUrl,{method:"GET",cache:"no-store"});if(!e.ok)throw new Error(`An error has occured: ${e.status}`);t=await e.json()}catch(n){return void(this.gasPrice=0)}"eth"===this.pair&&(e=parseFloat(t.average)/10),"bsc"===this.pair&&(e=parseFloat(t.result.SafeGasPrice)),this.gasPrice=e>0?e:this.params.defaultGwei},onWalletConnected(t){this.provider=(0,et.Xl)(t),this.bridgeProcessorIsLoading=!this.$refs.bridgeProcessor,this.isConnected=!0,this.walletsPopupState="closed",this.$refs?.bridgeProcessor?.onTokenChange(this.token),this.provider.on("disconnect",(()=>{this.isTransferInProgress?this.walletsPopupState="opened-uncancellable":(this.provider=null,this.isConnected=!1,this.bridgeProcessorIsLoading=!1)}))},onBridgeProcessorReady(){this.loadStateProcessor(),this.bridgeProcessorIsLoading=!1},onBridgeTransferError(t){"amount"===t.input&&(this.errors.amount=t.message),"toAddress"===t.input&&(this.errors.toAddress=t.message)}}});const xn=(0,g.Z)(Pn,[["render",G],["__scopeId","data-v-bd608f96"]]);var Dn=xn;const En=[{path:"/",name:"Bridge",component:Dn}],On=(0,z.p7)({history:(0,z.PO)("/token-bridge/"),routes:En});var $n=On,Ln=(0,c.MT)({state:()=>({alert:null}),mutations:{setAlert(t,e){t.alert=e}},getters:{alert(t){return t.alert}},actions:{}});(0,r.ri)(S).use(s.Z).use(B).use(Ln).use($n).mount("#app")},97450:function(t,e,n){"use strict";n.d(e,{z:function(){return r}});const r={appName:"TON Bridge",appLogoUrl:"https://ton.org/bridge/favicon.ico",tonTransferUrl:"ton://transfer/<BRIDGE_ADDRESS>?amount=<AMOUNT>&text=swapTo%23<TO_ADDRESS>",tonExplorerUrl:{main:"https://tonscan.org/address/<ADDRESS>",test:"https://testnet.tonscan.org/address/<ADDRESS>"},networks:{eth:{main:{getGasUrl:"https://ethereumgas.toncenter.com",explorerUrl:"https://etherscan.io/token/<ADDRESS>",wTonAddress:"0x582d872a1b094fc48f5de31d3b73f2d9be47def1",tonBridgeAddress:"Ef_dJMSh8riPi3BTUTtcxsWjG8RLKnLctNjAM4rw8NN-xWdr",tonCollectorAddress:"EQCuzvIOXLjH2tv35gY4tzhIvXCqZWDuK9kUhFGXKLImgxT5",tonMultisigAddress:"kf87m7_QrVM4uXAPCDM4DuF9Rj5Rwa5nHubwiQG96JmyAo-S",tonBridgeAddressV2:"",tonBridgeV2EVMAddress:"",tonCollectorAddressV2:"",tonMultisigAddressV2:"",tonCenterUrl:"https://toncenter.com/api/v2/jsonRPC",tonCenterApiKey:"d843619b379084d133f061606beecbf72ae2bf60e0622e808f2a3f631673599b",rpcEndpoint:"https://mainnet.infura.io/v3/d29ee9db9b7b4bbc8fa5d28047a3ff47",chainId:1,blocksConfirmations:12,defaultGwei:25,coinsPerGweiTo:.004,coinsPerGweiFrom:.001},test:{getGasUrl:"https://ethereumgas.toncenter.com",explorerUrl:"https://goerli.etherscan.io/token/<ADDRESS>",wTonAddress:"0xDB15ffaf2c88F2d89Db9365a5160D5b8c9448Ea6",tonBridgeAddress:"Ef-56ZiqKUbtp_Ax2Qg4Vwh7yXXJCO8cNJAb229J6XXe4-aC",tonCollectorAddress:"EQCA1W_I267-luVo9CzV7iCcrA1OO5vVeXD0QHACvBn1jIVU",tonMultisigAddress:"kf-OV1dpgFVEzEmyvAETT8gnhqZ1IqHn8RzT6dmEmvnze-9n",tonBridgeV2EVMAddress:"0x4E1edf0df291308e127F42af57E95519BDd78412",tonBridgeAddressV2:"Ef8KQJu6icsG2p9kEmWvjr7OfXZriklfH07r0Bome7-oj6bq",tonCollectorAddressV2:"Ef8XgFexQROKv4NSFzV-KC0fb_pFZqkPDgFXHF32WEuniiaC",tonMultisigAddressV2:"Ef_J6OpV-tAdJjby1fvE6oD2-Put6VL4fuFn-g4qDVQDXPAi",tonCenterUrl:"https://testnet.toncenter.com/api/v2/jsonRPC",tonCenterApiKey:"d843619b379084d133f061606beecbf72ae2bf60e0622e808f2a3f631673599b",rpcEndpoint:"https://goerli.infura.io/v3/1f24ea6b55e9432d993a9c0ff68eeee5",chainId:5,blocksConfirmations:12,defaultGwei:25,coinsPerGweiTo:.004,coinsPerGweiFrom:.001}},bsc:{main:{getGasUrl:"https://gbsc.blockscan.com/gasapi.ashx?apikey=key&method=gasoracle",explorerUrl:"https://bscscan.com/token/<ADDRESS>",wTonAddress:"0x76A797A59Ba2C17726896976B7B3747BfD1d220f",tonBridgeAddress:"Ef9NXAIQs12t2qIZ-sRZ26D977H65Ol6DQeXc5_gUNaUys5r",tonCollectorAddress:"EQAHI1vGuw7d4WG-CtfDrWqEPNtmUuKjKFEFeJmZaqqfWTvW",tonMultisigAddress:"kf8OvX_5ynDgbp4iqJIvWudSEanWo0qAlOjhWHtga9u2Yo7j",tonBridgeV2EVMAddress:"",tonBridgeAddressV2:"",tonCollectorAddressV2:"",tonMultisigAddressV2:"",tonCenterUrl:"https://toncenter.com/api/v2/jsonRPC",tonCenterApiKey:"d843619b379084d133f061606beecbf72ae2bf60e0622e808f2a3f631673599b",rpcEndpoint:"https://bsc-dataseed.binance.org/",chainId:56,blocksConfirmations:12,defaultGwei:5,coinsPerGweiTo:8e-4,coinsPerGweiFrom:2e-4},test:{getGasUrl:"https://gbsc.blockscan.com/gasapi.ashx?apikey=key&method=gasoracle",explorerUrl:"https://testnet.bscscan.com/token/<ADDRESS>",wTonAddress:"0xdb15ffaf2c88f2d89db9365a5160d5b8c9448ea6",tonBridgeAddress:"Ef_GmJntTDokxfhLGF1jRvMGC8Jav2V5keoNj4El2jzhHsID",tonCollectorAddress:"EQDBNfV4DQzSyzNMw6BCTSZSoUi-CzWcYNsfhKxoDqfrwFtS",tonMultisigAddress:"kf83VnnXuaqQV1Ts2qvUr6agacM0ydOux5NNa1mcU-cEO693",tonBridgeV2EVMAddress:"0xA25805A3b25CBa417FCEa44d9A73c4f923415F5B",tonBridgeAddressV2:"Ef9wQwTpfH3zF6L1cNpRQF4bjJE0sqYRrt_JfrQbmeJn_Hh2",tonCollectorAddressV2:"EQDCJE2o5aX0U5YZslZYFChWsgZpRFVml_b9xQPmLmVPegPW",tonMultisigAddressV2:"kf8ghwmw3afnQwnGG4W99hMvMxqlkfUm2QtHXiux1ElPO4tG",tonCenterUrl:"https://testnet.toncenter.com/api/v2/jsonRPC",tonCenterApiKey:"d843619b379084d133f061606beecbf72ae2bf60e0622e808f2a3f631673599b",rpcEndpoint:"https://data-seed-prebsc-1-s1.binance.org:8545/",chainId:97,blocksConfirmations:12,defaultGwei:5,coinsPerGweiTo:8e-4,coinsPerGweiFrom:2e-4}}}}},47688:function(t,e,n){"use strict";function r(t){return new Promise(((e,n)=>{const r=document.createElement("script"),s=document.getElementsByTagName("script")[0];r.async=!0,r.onload=()=>{r.onload=null,r.onerror=null,setTimeout(e,0)},r.onerror=()=>{r.onload=null,r.onerror=null,setTimeout(n,0)},r.src=t,s.parentNode.insertBefore(r,s)}))}function s(){try{return"localStorage"in window&&null!==window["localStorage"]}catch(t){return!1}}function o(t){return"number"===typeof t?t:"string"===typeof t?parseInt(t,t.toLowerCase().startsWith("0x")?16:10):0}n.d(e,{DQ:function(){return o},iM:function(){return r},y1:function(){return s}})},38988:function(t,e,n){var r={"./metamask/index":[15517,517],"./walletConnect/index":[84528,528],"./walletLink/index":[41686,686]};function s(t){if(!n.o(r,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=r[t],s=e[0];return n.e(e[1]).then((function(){return n(s)}))}s.keys=function(){return Object.keys(r)},s.id=38988,t.exports=s},71793:function(t,e,n){"use strict";t.exports=n.p+"img/gem@large.0d6c241e.png"},88677:function(){},62808:function(){},46601:function(){},46528:function(){},9529:function(){},55024:function(){}},e={};function n(r){var s=e[r];if(void 0!==s)return s.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=t,function(){n.amdO={}}(),function(){var t=[];n.O=function(e,r,s,o){if(!r){var i=1/0;for(c=0;c<t.length;c++){r=t[c][0],s=t[c][1],o=t[c][2];for(var a=!0,l=0;l<r.length;l++)(!1&o||i>=o)&&Object.keys(n.O).every((function(t){return n.O[t](r[l])}))?r.splice(l--,1):(a=!1,o<i&&(i=o));if(a){t.splice(c--,1);var d=s();void 0!==d&&(e=d)}}return e}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[r,s,o]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){n.f={},n.e=function(t){return Promise.all(Object.keys(n.f).reduce((function(e,r){return n.f[r](t,e),e}),[]))}}(),function(){n.u=function(t){return"js/"+t+"."+{517:"0b704fca",528:"1dc83c57",686:"5f521528"}[t]+".js"}}(),function(){n.miniCssF=function(t){}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="ton-token-bridge:";n.l=function(r,s,o,i){if(t[r])t[r].push(s);else{var a,l;if(void 0!==o)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==e+o){a=u;break}}a||(l=!0,a=document.createElement("script"),a.charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",e+o),a.src=r),t[r]=[s];var p=function(e,n){a.onerror=a.onload=null,clearTimeout(h);var s=t[r];if(delete t[r],a.parentNode&&a.parentNode.removeChild(a),s&&s.forEach((function(t){return t(n)})),e)return e(n)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=p.bind(null,a.onerror),a.onload=p.bind(null,a.onload),l&&document.head.appendChild(a)}}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){n.p="/token-bridge/"}(),function(){var t={143:0};n.f.j=function(e,r){var s=n.o(t,e)?t[e]:void 0;if(0!==s)if(s)r.push(s[2]);else{var o=new Promise((function(n,r){s=t[e]=[n,r]}));r.push(s[2]=o);var i=n.p+n.u(e),a=new Error,l=function(r){if(n.o(t,e)&&(s=t[e],0!==s&&(t[e]=void 0),s)){var o=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;a.message="Loading chunk "+e+" failed.\n("+o+": "+i+")",a.name="ChunkLoadError",a.type=o,a.request=i,s[1](a)}};n.l(i,l,"chunk-"+e,e)}},n.O.j=function(e){return 0===t[e]};var e=function(e,r){var s,o,i=r[0],a=r[1],l=r[2],d=0;if(i.some((function(e){return 0!==t[e]}))){for(s in a)n.o(a,s)&&(n.m[s]=a[s]);if(l)var c=l(n)}for(e&&e(r);d<i.length;d++)o=i[d],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(c)},r=self["webpackChunkton_token_bridge"]=self["webpackChunkton_token_bridge"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(26693)}));r=n.O(r)})();
//# sourceMappingURL=app.eaab1920.js.map